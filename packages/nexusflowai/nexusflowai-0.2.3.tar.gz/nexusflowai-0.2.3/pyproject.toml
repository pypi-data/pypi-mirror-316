[project]
name = "nexusflowai"
version = "0.2.3"
description = "The official Python library for the nexusflowai API"
dynamic = ["readme"]
license = "Apache-2.0"
authors = [
{ name = "Nexusflow.ai" },
]
dependencies = [
    "httpx<0.28.0",
    "openai==1.54.4",
    "datamodel-code-generator==0.26.0",
    "jsonschema==4.23.0",
    "json_repair==0.29.4",
    # Qwen Agent dependencies. We enumerate the necessary dependencies here since the full install is quite heavy.
    "qwen-agent==0.0.13",
    "python-dateutil==2.9.0.post0",
]
requires-python = ">= 3.10"
classifiers = [
  "Typing :: Typed",
  "Intended Audience :: Developers",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Operating System :: OS Independent",
  "Operating System :: POSIX",
  "Operating System :: MacOS",
  "Operating System :: POSIX :: Linux",
  "Operating System :: Microsoft :: Windows",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "License :: OSI Approved :: Apache Software License"
]

[project.urls]
Homepage = "https://nexusflow.ai/"
Repository = "https://github.com/nexusflowai/NexusflowAI"

[project.optional-dependencies]
dev = [
  "pytest==7.4.3",
  "pytest-xdist==3.6.1",
  "pytest-cov==5.0.0",
  "pytest-asyncio==0.23.8",
  "black==23.12.1",
  "pylint==3.0.3",
]

[build-system]
requires = ["hatchling", "hatch-fancy-pypi-readme"]
build-backend = "hatchling.build"

[tool.hatch.build]
include = [
  "nexusflowai/*"
]

[tool.hatch.build.targets.wheel]
packages = ["nexusflowai"]

[tool.hatch.build.targets.sdist]
# Basically everything except hidden files/directories (such as .github, .devcontainers, .python-version, etc)
include = [
  "/*.toml",
  "/*.json",
  "/*.lock",
  "/*.md",
  "/mypy.ini",
  "/noxfile.py",
  "nexusflowai/*",
]

[tool.hatch.metadata.hooks.fancy-pypi-readme]
content-type = "text/markdown"

[[tool.hatch.metadata.hooks.fancy-pypi-readme.fragments]]
path = "README.md"

[[tool.hatch.metadata.hooks.fancy-pypi-readme.substitutions]]
# replace relative links with absolute links
pattern = '\[(.+?)\]\(((?!https?://)\S+?)\)'
replacement = '[\1](https://github.com/nexusflowai/NexusflowAI/tree/main/\g<2>)'

[tool.pylint.'MESSAGES CONTROL']
disable = "C0103,C0114,C0115,C0116,C0301,C0302,C3001,E0015,E1101,E1133,E1136,R0401,R0801,R0902,R0903,R0904,R0911,R0912,R0913,R0914,R0915,R1705,R1724,R1735,W0105,W0221,W0237,W1203,"

[tool.pylint.master]
fail-under = 9.99

[tool.coverage.report]
skip_covered = true
sort = "miss"
exclude_also = [
    "def __repr__",
    "if self.debug:",
    "if settings.DEBUG",
    "raise AssertionError",
    "raise NotImplementedError",
    "if 0:",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "class .*\\bProtocol\\):",
    "@(abc\\.)?abstractmethod",
    "pass",
    "def .*push_to_hub.*",
    "def .*load_dataset.*",
    "except Exception",
]

[tool.coverage.run]
source = ["."]
command_line = "-m pytest --durations=10"
omit = ["setup.py", "tests/*", "temp*.py"]

[tool.pytest.ini_options]
norecursedirs = [
    "on_demand",
]
