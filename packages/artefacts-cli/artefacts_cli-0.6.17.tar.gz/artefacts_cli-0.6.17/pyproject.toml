[build-system]
requires = ["setuptools>=64.0", "setuptools-scm>=8"]
build-backend = "setuptools.build_meta"

[project]
name = "artefacts_cli"
authors = [
  { name="FD", email="fabian@artefacts.com" },
  { name="AGC", email="alejandro@artefacts.com" },
  { name="TN", email="tomo@artefacts.com" },
  { name="EP", email="eric@artefacts.com" },
]
description = ""
readme = "README.md"
requires-python = ">=3.8"
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: OS Independent",
]
dependencies = [
  "artefacts-copava>=0.1.11",
  "click>=8.0.4",
  "gitignore_parser>=0.1.11",
  "junitparser>=2.5",
  "mcap",
  "mcap-ros2-support",
  "PyYAML>=6.0",
  "requests>=2.27.1",
  "setuptools-scm",
  "setuptools>=74", # setuptools-scm requires without version, but does not work with oldish versions, so let's ensure a recent, tested one.
]
dynamic = ["version"]

[tool.setuptools]
packages = ["artefacts", "artefacts.cli"]

[tool.setuptools_scm]
version_file = "artefacts/cli/version.py"
local_scheme = "no-local-version"

[project.optional-dependencies]
dev = [
  "awscli",
  "build",
  "docker",
  "lark",
  "pyre-check",
  "pytest",
  "pytest-cov",
  "pytest-env",
  "pytest-mock",
  "ruff",
  "twine",
  "mkdocs-click==0.8.0",
  "mkdocs-material==8.5.6",
  "mkdocs-mermaid2-plugin==0.6.0",
  "mkdocs==1.4.2",
  "pre-commit",
  "python-markdown-math",
]

[project.urls]
"Homepage" = "https://github.com/art-e-fact/artefacts-client"
"Bug Tracker" = "https://github.com/art-e-fact/artefacts-client/issues"

[project.scripts]
artefacts = "artefacts.cli.app:artefacts"

[tool.ruff]
# https://docs.astral.sh/ruff/configuration/
line-length = 88  # default is 88
exclude = [
  "*.eggs",
  "*.git",
  "*.hg",
  "*.mypy_cache",
  "*.pyre",
  "*.pytest_cache",
  "*.tox",
  "*.venv",
  "_build",
  "artefacts/cli/version.py", # Troublesome in CI (not part of the repo)
  "buck-out",
  "build",
  "dist",
  "venv",
]

