"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{30695:function(e,t,i){i.d(t,{_i:function(){return n},gz:function(){return s},hw:function(){return o},sj:function(){return a},wG:function(){return l}});var r=i(20357);async function l(e,t){var i;let{arg:l}=t,n=await fetch((null!==(i=r.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"")+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!(n.status>=200&&n.status<300))throw Error(await n.text());let a=await n.json();if(!n.ok)throw Error(a.message);return a}let n=async function(){for(var e,t=arguments.length,i=Array(t),l=0;l<t;l++)i[l]=arguments[l];let n=await fetch((null!==(e=r.env.NEXT_PUBLIC_API_SERVER)&&void 0!==e?e:"")+i[0],i[1]);if(!n.ok)throw Error(await n.text());return n.json()},a=async(e,t)=>{var i;let l=await fetch((null!==(i=r.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"")+e,t);if(!l.ok)throw Error(await l.text());return l};async function o(e,t){var i;let{arg:l}=t,n=await fetch("".concat(null!==(i=r.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"").concat(e,"/").concat(l),{method:"DELETE"});if(!n.ok)throw Error(await n.text());return n}async function s(e,t){var i;let{arg:l}=t,n=await fetch("".concat(null!==(i=r.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!n.ok)throw Error(await n.text());return n}},12951:function(e,t,i){i.d(t,{Bf:function(){return o},JB:function(){return s},ZP:function(){return a}});var r=i(91617),l=i(30695),n=i(2265);function a(){let{data:e,error:t,isLoading:i}=(0,r.ZP)("/v1/streamers",l._i);return{isLoading:i,streamers:e}}function o(){let{data:e,error:t,isLoading:i}=(0,r.ZP)("/v1/users",l._i),[a,o]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{var t;let i=await (0,l._i)("/bili/space/myinfo?user=".concat(e.value),void 0),r=await (0,l.sj)("/bili/proxy?url=".concat(null===(t=i.data)||void 0===t?void 0:t.face)),n=await r.blob();return{...e,name:i.data.name,face:URL.createObjectURL(n)}}catch(r){console.error(r);let t=await (0,l.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),i=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(i)}}};Promise.all(e.map(t)).then(o)},[e]),{isLoading:i,isError:t,biliUsers:a}}function s(){var e;let{data:t,error:i,isLoading:n}=(0,r.ZP)("/bili/archive/pre",l._i);return{isLoading:n,isError:i,typeTree:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}))}}},44623:function(e,t,i){i.d(t,{Fg:function(){return s},K4:function(){return o},cE:function(){return a},f:function(){return l},ql:function(){return n}});var r=i(2265);let l={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},n=(e,t)=>{let{match:i,unmatch:r,callInInit:l=!0}=t;{let t=window.matchMedia(e),n=function(e){e.matches?i&&i(e):r&&r(e)};return(l&&n(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",n),()=>t.removeEventListener("change",n)):(t.addListener(n),()=>t.removeListener(n))}},a=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-"),o=()=>{let[e,t]=(0,r.useState)("light");return(0,r.useEffect)(()=>{let e=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t(e);let i=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>t(e);return i.addEventListener("change",r),()=>i.removeEventListener("change",r)},[]),e},s=(e,t)=>{(0,r.useEffect)(()=>{switch(localStorage.setItem("mode",e),e){case"light":document.body.setAttribute("theme-mode","light");break;case"dark":document.body.setAttribute("theme-mode","dark");break;default:document.body.setAttribute("theme-mode",t)}},[e,t])}},54935:function(e,t,i){var r=i(57437),l=i(2265),n=i(98964),a=i(36710),o=i(52293),s=i(15981),c=i(48936),d=i(12951);t.Z=e=>{var t,i;let{formState:u,formApi:h,values:m}=e,{Section:f,Input:x,DatePicker:p,TimePicker:v,Select:y,Switch:j,InputNumber:b,Checkbox:w,CheckboxGroup:g,RadioGroup:_,Radio:E,Cascader:S,TagInput:C,TextArea:k}=c.Form,{Text:L}=c.Typography,{typeTree:P,isError:R,isLoading:T}=(0,d.JB)(),F=null==P?void 0:P.map(e=>({...e,children:e.children.map(e=>({label:(0,r.jsxs)(r.Fragment,{children:[e.name," ",(0,r.jsx)(L,{type:"quaternary",size:"small",children:e.desc})]}),value:e.id}))})),O=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{field:"sound",options:[{label:"杜比音效",value:"dolby"},{label:"Hi-Res无损音质",value:"hires"}],direction:"horizontal",label:"音效设置"}),(0,r.jsx)(g,{field:"interaction",options:[{label:"关闭弹幕",value:"up_close_danmu"},{label:"关闭评论",value:"up_close_reply"},{label:"开启精选评论",value:"up_selection_reply"}],direction:"horizontal",label:"互动设置"}),(0,r.jsx)(x,{field:"dynamic",label:"粉丝动态",style:{width:464}}),(0,r.jsxs)(c.Form.Select,{field:"uploader",label:"上传插件",initValue:null!==(t=m.uploader)&&void 0!==t?t:"biliup-rs",style:{width:250},showClear:!0,children:[(0,r.jsx)(c.Form.Select.Option,{value:"bili_web",children:"bili_web"}),(0,r.jsx)(c.Form.Select.Option,{value:"biliup-rs",children:"biliup-rs"}),(0,r.jsx)(c.Form.Select.Option,{value:"Noop",children:"Noop"})]}),(0,r.jsx)(j,{field:"no_reprint",label:"自制声明"}),(0,r.jsx)(c.Form.Switch,{field:"open_elec",label:"开启充电面板"}),(0,r.jsx)(c.OF,{field:"credits",children:e=>{let{add:t,arrayFields:i}=e;return(0,r.jsxs)(c.Form.Section,{text:"简介@替换",children:[(0,r.jsxs)("div",{className:"semi-form-field-extra",style:{fontSize:"14px"},children:["如需在简介中@别人，请使用此项。示例：",(0,r.jsx)("br",{}),"简介：","{","streamer","}","主播直播间地址：","{","url","}"," 【@credit】",(0,r.jsx)("br",{}),'其中的"@credits"会依次替换为下面输入的@']}),(0,r.jsx)(c.zx,{icon:(0,r.jsx)(n.Z,{}),onClick:t,theme:"light",children:"添加行"}),i.map((e,t)=>{let{field:i,key:l,remove:n}=e;return(0,r.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,r.jsxs)(c.BZ,{children:[(0,r.jsx)(x,{field:"".concat(i,".username"),label:"需要@的用户名",placeholder:"username"}),(0,r.jsx)(x,{field:"".concat(i,".uid"),label:"需要@的uid",placeholder:"uid"})]}),(0,r.jsx)(c.zx,{type:"danger",theme:"borderless",icon:(0,r.jsx)(a.Z,{}),onClick:n,style:{margin:12}})]},l)})]})}})]}),[z,I]=(0,l.useState)(!1),{biliUsers:B}=(0,d.Bf)(),N=null==B?void 0:B.map(e=>({value:e.value,label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.qE,{size:"extra-small",src:e.face}),(0,r.jsx)("span",{style:{marginLeft:8},children:e.name})]})}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f,{text:"基本信息",children:[(0,r.jsx)(x,{rules:[{required:!0}],field:"template_name",label:"模板名称",style:{width:464}}),(0,r.jsx)(c.Form.Select,{rules:[{required:!0}],field:"user_cookie",label:{text:"投稿账号"},style:{width:176},optionList:N})]}),(0,r.jsxs)(f,{text:"基本设置",children:[(0,r.jsx)(x,{field:"title",label:"视频标题",style:{width:464},placeholder:"稿件标题",extraText:(0,r.jsxs)("div",{style:{fontSize:14},children:["{","streamer","}",": 录播备注",(0,r.jsx)("br",{}),"{","title","}",": 直播标题",(0,r.jsx)("br",{}),"%Y-%m-%d %H_%M_%S: 开始录制时的 年-月-日 时_分_秒"]})}),(0,r.jsxs)(_,{field:"copyright",label:"类型",direction:"vertical",initValue:null!==(i=h.getValue("copyright"))&&void 0!==i?i:2,extraText:(0,r.jsx)("div",{style:{fontSize:14},children:"如不填写转载来源默认为直播间地址"}),children:[(0,r.jsxs)(E,{value:2,style:{alignItems:"center",flexShrink:0},children:[(0,r.jsx)("span",{style:{flexShrink:0},children:"转载"}),(0,r.jsx)(x,{field:"copyright_source",onClick:()=>h.setValue("copyright",2),placeholder:"转载视频请注明来源（例：转自http://www.xx.com/yy）注明来源会更快地通过审核哦",noLabel:!0,fieldStyle:{padding:0,marginLeft:24,width:560}})]}),(0,r.jsx)("div",{onClick:()=>h.setValue("copyright_source",""),children:(0,r.jsx)(E,{value:1,children:"自制"})})]}),(0,r.jsx)(S,{field:"tid",label:"分区",style:{width:272},treeData:F,placeholder:"投稿分区",dropdownStyle:{maxWidth:670},rules:[{required:!0}]}),(0,r.jsx)(C,{max:12,maxLength:20,field:"tags",label:"标签",allowDuplicates:!1,addOnBlur:!0,separator:",",placeholder:"可用英文逗号分隔以批量输入标签，失焦/Enter 以保存",onChange:e=>console.log(e),style:{width:560},rules:[{required:!0,message:"Tag不能为空"}],onExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"标签数量不能超过12个",duration:3})},onInputExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"单个标签字数不能超过20",duration:3})}}),(0,r.jsx)(x,{field:"cover_path",label:"视频封面",style:{width:464},placeholder:"/cover/up.jpg"}),(0,r.jsx)(k,{style:{maxWidth:560},field:"description",label:"简介",placeholder:"填写更全面的相关信息，让更多的人能找到你的视频吧",autosize:!0,maxCount:2e3,showClear:!0}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"var(--semi-color-tertiary)"},children:[(0,r.jsx)(j,{field:"isDtime",label:{text:"定时发布"},checkedText:"｜",uncheckedText:"〇"}),(0,r.jsx)("span",{style:{paddingLeft:12,fontSize:12},children:"(当前+2小时 ≤ 可选时间 ≤ 当前+15天，转载稿件撞车判定以过审发布时间为准)"})]}),m.isDtime?(0,r.jsx)(p,{field:"dtime",label:" ",type:"dateTime",fieldStyle:{paddingTop:0}}):null]}),(0,r.jsx)(f,{style:{paddingBottom:40},text:(0,r.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{I(!z),h.scrollToField("isDtime")},children:["更多设置 ",z?(0,r.jsx)(o.Z,{style:{marginLeft:12}}):(0,r.jsx)(s.Z,{style:{marginLeft:12}})]}),children:(0,r.jsx)(c.zF,{isOpen:z,keepDOM:!0,children:O})})]})}},36710:function(e,t,i){var r=i(2265);let l=(0,i(26018).A)(function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM6.5 10.5H17.5C18.3284 10.5 19 11.1716 19 12C19 12.8284 18.3284 13.5 17.5 13.5H6.5C5.67157 13.5 5 12.8284 5 12C5 11.1716 5.67157 10.5 6.5 10.5Z",fill:"currentColor"}))},"minus_circle");t.Z=l},16463:function(e,t,i){var r=i(71169);i.o(r,"usePathname")&&i.d(t,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})}}]);