import{s as re,ak as Ut,al as Dt,e as _,y as s,n as oe,a8 as it,ay as jt,az as It,aA as Qt,N as Ce,z,O as Fe,ap as st,ae as ut,aB as Vt,L as ct,M as dt,ad as Mt,aa as Ht,aC as $t,w as ne,o as ft,as as Wt,aD as ge,aE as vt,aF as Je,Q as H,aG as gt,aH as Gt,aI as Kt,aJ as Zt,aK as Xe,a9 as Jt,A as mt,ac as Xt,ab as Yt,Z as Me,aL as Ye,af as bt,d as el,u as tl,aM as pe,aN as ll,_ as al,f as he,k as Le,l as D,p as fe,m as L,g as ol,F as nl,G as rl,D as il,t as ye,a3 as je,W as Ie,$ as Se,aO as sl,a1 as Qe,B as we,a2 as qe,a0 as ul}from"./index-DFt1AGAb.js";import{Q as et}from"./QInput-tAS5xUAR.js";import{Q as cl}from"./QCircularProgress-DSqVnq0k.js";import{h as tt}from"./format-CJebrXOQ.js";import{Q as dl}from"./QSeparator-DAnNFV-Z.js";import{Q as fl}from"./QList-CieOlR79.js";import{Q as vl}from"./QMarkupTable-B5ALrbtl.js";import{u as gl,a as ml,c as _t,Q as bl}from"./QSelect-C8WUCq1a.js";import{Q as _l}from"./QLinearProgress-D5MFhoX0.js";import{u as pl,a as hl,b as yl}from"./use-checkbox-Bnqm8kfv.js";import{u as Sl,a as wl,b as ql}from"./use-fullscreen-D_yNEDpZ.js";import{Q as Cl}from"./QPage-BSM4c28G.js";import"./use-key-composition-CzDMEDZF.js";import"./use-id-DJXM0hhb.js";import"./QItem-DGtX3pBd.js";import"./rtl-sCzTslrN.js";import"./selection-9dIG8Qc1.js";const lt=re({name:"QBreadcrumbsEl",props:{...Ut,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:l}){const{linkTag:n,linkAttrs:t,linkClass:i,navigateOnClick:c}=Dt(),r=_(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+i.value:"q-breadcrumbs__el--disable"),...t.value,onClick:c})),f=_(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const m=[];return e.icon!==void 0&&m.push(s(oe,{class:f.value,name:e.icon})),e.label!==void 0&&m.push(e.label),s(n.value,{...r.value},it(l.default,m))}}}),Fl=["",!0],kl=re({name:"QBreadcrumbs",props:{...jt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:l}){const n=It(e),t=_(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),i=_(()=>e.separatorColor?` text-${e.separatorColor}`:""),c=_(()=>` text-${e.activeColor}`);return()=>{if(l.default===void 0)return;const r=Qt(Ce(l.default));if(r.length===0)return;let f=1;const m=[],w=r.filter(p=>p.type!==void 0&&p.type.name==="QBreadcrumbsEl").length,u=l.separator!==void 0?l.separator:()=>e.separator;return r.forEach(p=>{if(p.type!==void 0&&p.type.name==="QBreadcrumbsEl"){const P=f<w,x=p.props!==null&&Fl.includes(p.props.disable),o=(P===!0?"":" q-breadcrumbs--last")+(x!==!0&&P===!0?c.value:"");f++,m.push(s("div",{class:`flex items-center${o}`},[p])),P===!0&&m.push(s("div",{class:"q-breadcrumbs__separator"+i.value},u()))}else m.push(p)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:t.value},m)])}}});function ve(e,l,n,t){const i=[];return e.forEach(c=>{t(c)===!0?i.push(c):l.push({failedPropValidation:n,file:c})}),i}function Re(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ut(e)}const Pl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xl=["rejected"];function Bl({editable:e,dnd:l,getFileInput:n,addFilesToQueue:t}){const{props:i,emit:c,proxy:r}=Fe(),f=z(null),m=_(()=>i.accept!==void 0?i.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),w=_(()=>parseInt(i.maxFiles,10)),u=_(()=>parseInt(i.maxTotalSize,10));function p(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&st(d);else{const A=n();A&&A!==d.target&&A.click(d)}}function P(d){e.value&&d&&t(null,d)}function x(d,A,O,U){let B=Array.from(A||d.target.files);const N=[],F=()=>{N.length!==0&&c("rejected",N)};if(i.accept!==void 0&&m.value.indexOf("*/")===-1&&(B=ve(B,N,"accept",g=>m.value.some(y=>g.type.toUpperCase().startsWith(y)||g.name.toUpperCase().endsWith(y))),B.length===0))return F();if(i.maxFileSize!==void 0){const g=parseInt(i.maxFileSize,10);if(B=ve(B,N,"max-file-size",y=>y.size<=g),B.length===0)return F()}if(i.multiple!==!0&&B.length!==0&&(B=[B[0]]),B.forEach(g=>{g.__key=g.webkitRelativePath+g.lastModified+g.name+g.size}),U===!0){const g=O.map(y=>y.__key);B=ve(B,N,"duplicate",y=>g.includes(y.__key)===!1)}if(B.length===0)return F();if(i.maxTotalSize!==void 0){let g=U===!0?O.reduce((y,j)=>y+j.size,0):0;if(B=ve(B,N,"max-total-size",y=>(g+=y.size,g<=u.value)),B.length===0)return F()}if(typeof i.filter=="function"){const g=i.filter(B);B=ve(B,N,"filter",y=>g.includes(y))}if(i.maxFiles!==void 0){let g=U===!0?O.length:0;if(B=ve(B,N,"max-files",()=>(g++,g<=w.value)),B.length===0)return F()}if(F(),B.length!==0)return B}function o(d){Re(d),l.value!==!0&&(l.value=!0)}function h(d){ut(d),(d.relatedTarget!==null||Vt.is.safari!==!0?d.relatedTarget!==f.value:document.elementsFromPoint(d.clientX,d.clientY).includes(f.value)===!1)===!0&&(l.value=!1)}function S(d){Re(d);const A=d.dataTransfer.files;A.length!==0&&t(null,A),l.value=!1}function q(d){if(l.value===!0)return s("div",{ref:f,class:`q-${d}__dnd absolute-full`,onDragenter:Re,onDragover:Re,onDragleave:h,onDrop:S})}return Object.assign(r,{pickFiles:p,addFiles:P}),{pickFiles:p,addFiles:P,onDragover:o,onDragleave:h,processFiles:x,getDndNode:q,maxFilesNumber:w,maxTotalSizeNumber:u}}function at(e){return(e*100).toFixed(2)+"%"}const Tl={...ct,...Pl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},pt=[...xl,"start","finish","added","removed"];function El(e,l){const n=Fe(),{props:t,slots:i,emit:c,proxy:r}=n,{$q:f}=r,m=dt(t,f);function w(v,R,V){if(v.__status=R,R==="idle"){v.__uploaded=0,v.__progress=0,v.__sizeLabel=tt(v.size),v.__progressLabel="0.00%";return}if(R==="failed"){r.$forceUpdate();return}v.__uploaded=R==="uploaded"?v.size:V,v.__progress=R==="uploaded"?1:Math.min(.9999,v.__uploaded/v.size),v.__progressLabel=at(v.__progress),r.$forceUpdate()}const u=_(()=>t.disable!==!0&&t.readonly!==!0),p=z(!1),P=z(null),x=z(null),o={files:z([]),queuedFiles:z([]),uploadedFiles:z([]),uploadedSize:z(0),updateFileStatus:w,isAlive:()=>Mt(n)===!1},{pickFiles:h,addFiles:S,onDragover:q,onDragleave:d,processFiles:A,getDndNode:O,maxFilesNumber:U,maxTotalSizeNumber:B}=Bl({editable:u,dnd:p,getFileInput:K,addFilesToQueue:me});Object.assign(o,e({props:t,slots:i,emit:c,helpers:o,exposeApi:v=>{Object.assign(o,v)}})),o.isBusy===void 0&&(o.isBusy=z(!1));const N=z(0),F=_(()=>N.value===0?0:o.uploadedSize.value/N.value),g=_(()=>at(F.value)),y=_(()=>tt(N.value)),j=_(()=>u.value===!0&&o.isUploading.value!==!0&&(t.multiple===!0||o.queuedFiles.value.length===0)&&(t.maxFiles===void 0||o.files.value.length<U.value)&&(t.maxTotalSize===void 0||N.value<B.value)),E=_(()=>u.value===!0&&o.isBusy.value!==!0&&o.isUploading.value!==!0&&o.queuedFiles.value.length!==0);Ht($t,xe);const G=_(()=>"q-uploader column no-wrap"+(m.value===!0?" q-uploader--dark q-dark":"")+(t.bordered===!0?" q-uploader--bordered":"")+(t.square===!0?" q-uploader--square no-border-radius":"")+(t.flat===!0?" q-uploader--flat no-shadow":"")+(t.disable===!0?" disabled q-uploader--disable":"")+(p.value===!0?" q-uploader--dnd":"")),te=_(()=>"q-uploader__header"+(t.color!==void 0?` bg-${t.color}`:"")+(t.textColor!==void 0?` text-${t.textColor}`:""));ne(o.isUploading,(v,R)=>{R===!1&&v===!0?c("start"):R===!0&&v===!1&&c("finish")});function X(){t.disable===!1&&(o.abort(),o.uploadedSize.value=0,N.value=0,Pe(),o.files.value=[],o.queuedFiles.value=[],o.uploadedFiles.value=[])}function $(){t.disable===!1&&ke(["uploaded"],()=>{o.uploadedFiles.value=[]})}function le(){ke(["idle","failed"],({size:v})=>{N.value-=v,o.queuedFiles.value=[]})}function ke(v,R){if(t.disable===!0)return;const V={files:[],size:0},J=o.files.value.filter(M=>v.indexOf(M.__status)===-1?!0:(V.size+=M.size,V.files.push(M),M.__img!==void 0&&window.URL.revokeObjectURL(M.__img.src),!1));V.files.length!==0&&(o.files.value=J,R(V),c("removed",V.files))}function ae(v){t.disable||(v.__status==="uploaded"?o.uploadedFiles.value=o.uploadedFiles.value.filter(R=>R.__key!==v.__key):v.__status==="uploading"?v.__abort():N.value-=v.size,o.files.value=o.files.value.filter(R=>R.__key!==v.__key?!0:(R.__img!==void 0&&window.URL.revokeObjectURL(R.__img.src),!1)),o.queuedFiles.value=o.queuedFiles.value.filter(R=>R.__key!==v.__key),c("removed",[v]))}function Pe(){o.files.value.forEach(v=>{v.__img!==void 0&&window.URL.revokeObjectURL(v.__img.src)})}function K(){return x.value||P.value.getElementsByClassName("q-uploader__input")[0]}function me(v,R){const V=A(v,R,o.files.value,!0),J=K();J!=null&&(J.value=""),V!==void 0&&(V.forEach(M=>{if(o.updateFileStatus(M,"idle"),N.value+=M.size,t.noThumbnails!==!0&&M.type.toUpperCase().startsWith("IMAGE")){const ue=new Image;ue.src=window.URL.createObjectURL(M),M.__img=ue}}),o.files.value=o.files.value.concat(V),o.queuedFiles.value=o.queuedFiles.value.concat(V),c("added",V),t.autoUpload===!0&&o.upload())}function be(){E.value===!0&&o.upload()}function ie(v,R,V){if(v===!0){const J={type:"a",key:R,icon:f.iconSet.uploader[R],flat:!0,dense:!0};let M;return R==="add"?(J.onClick=h,M=xe):J.onClick=V,s(H,J,M)}}function xe(){return s("input",{ref:x,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:t.accept,multiple:t.multiple===!0?"multiple":void 0,capture:t.capture,onMousedown:st,onClick:h,onChange:me})}function _e(){return i.header!==void 0?i.header(Z):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(o.queuedFiles.value.length!==0,"removeQueue",le),ie(o.uploadedFiles.value.length!==0,"removeUploaded",$),o.isUploading.value===!0?s(Je,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[t.label!==void 0?s("div",{class:"q-uploader__title"},[t.label]):null,s("div",{class:"q-uploader__subtitle"},[y.value+" / "+g.value])]),ie(j.value,"add"),ie(t.hideUploadBtn===!1&&E.value===!0,"upload",o.upload),ie(o.isUploading.value,"clear",o.abort)])])]}function se(){return i.list!==void 0?i.list(Z):o.files.value.map(v=>s("div",{key:v.__key,class:"q-uploader__file relative-position"+(t.noThumbnails!==!0&&v.__img!==void 0?" q-uploader__file--img":"")+(v.__status==="failed"?" q-uploader__file--failed":v.__status==="uploaded"?" q-uploader__file--uploaded":""),style:t.noThumbnails!==!0&&v.__img!==void 0?{backgroundImage:'url("'+v.__img.src+'")',backgroundSize:t.thumbnailFit}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[v.__status==="failed"?s(oe,{class:"q-uploader__file-status",name:f.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[v.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[v.__sizeLabel+" / "+v.__progressLabel])]),v.__status==="uploading"?s(cl,{value:v.__progress,min:0,max:1,indeterminate:v.__progress===0}):s(H,{round:!0,dense:!0,flat:!0,icon:f.iconSet.uploader[v.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(v)}})])]))}ft(()=>{o.isUploading.value===!0&&o.abort(),o.files.value.length!==0&&Pe()});const Z={};for(const v in o)Wt(o[v])===!0?ge(Z,v,()=>o[v].value):Z[v]=o[v];return Object.assign(Z,{upload:be,reset:X,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:h,addFiles:S}),vt(Z,{canAddFiles:()=>j.value,canUpload:()=>E.value,uploadSizeLabel:()=>y.value,uploadProgressLabel:()=>g.value}),l({...o,upload:be,reset:X,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:h,addFiles:S,canAddFiles:j,canUpload:E,uploadSizeLabel:y,uploadProgressLabel:g}),()=>{const v=[s("div",{class:te.value},_e()),s("div",{class:"q-uploader__list scroll"},se()),O("uploader")];o.isBusy.value===!0&&v.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(Je)]));const R={ref:P,class:G.value};return j.value===!0&&Object.assign(R,{onDragover:q,onDragleave:d}),s("div",R,v)}}const Ll=()=>!0;function Rl(e){const l={};return e.forEach(n=>{l[n]=Ll}),l}const Ol=Rl(pt),Al=({name:e,props:l,emits:n,injectPlugin:t})=>re({name:e,props:{...Tl,...l},emits:gt(n)===!0?{...Ol,...n}:[...pt,...n],setup(i,{expose:c}){return El(t,c)}});function ee(e){return typeof e=="function"?e:()=>e}const zl="QUploader",Nl={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ul=["factoryFailed","uploaded","failed","uploading"];function Dl({props:e,emit:l,helpers:n}){const t=z([]),i=z([]),c=z(0),r=_(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),f=_(()=>c.value>0),m=_(()=>i.value.length!==0);let w;function u(){t.value.forEach(o=>{o.abort()}),i.value.length!==0&&(w=!0)}function p(){const o=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],r.value.batch(o)?P(o):o.forEach(h=>{P([h])})}function P(o){if(c.value++,typeof e.factory!="function"){x(o,{});return}const h=e.factory(o);if(!h)l("factoryFailed",new Error("QUploader: factory() does not return properly"),o),c.value--;else if(typeof h.catch=="function"&&typeof h.then=="function"){i.value.push(h);const S=q=>{n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==h),i.value.length===0&&(w=!1),n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(d=>{n.updateFileStatus(d,"failed")}),l("factoryFailed",q,o),c.value--)};h.then(q=>{w===!0?S(new Error("Aborted")):n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==h),x(o,q))}).catch(S)}else x(o,h||{})}function x(o,h){const S=new FormData,q=new XMLHttpRequest,d=(E,G)=>h[E]!==void 0?ee(h[E])(G):r.value[E](G),A=d("url",o);if(!A){console.error("q-uploader: invalid or no URL specified"),c.value--;return}const O=d("formFields",o);O!==void 0&&O.forEach(E=>{S.append(E.name,E.value)});let U=0,B=0,N=0,F=0,g;q.upload.addEventListener("progress",E=>{if(g===!0)return;const G=Math.min(F,E.loaded);n.uploadedSize.value+=G-N,N=G;let te=N-B;for(let X=U;te>0&&X<o.length;X++){const $=o[X];if(te>$.size)te-=$.size,U++,B+=$.size,n.updateFileStatus($,"uploading",$.size);else{n.updateFileStatus($,"uploading",te);return}}},!1),q.onreadystatechange=()=>{q.readyState<4||(q.status&&q.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"uploaded")}),l("uploaded",{files:o,xhr:q})):(g=!0,n.uploadedSize.value-=N,n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"failed")}),l("failed",{files:o,xhr:q})),c.value--,t.value=t.value.filter(E=>E!==q))},q.open(d("method",o),A),d("withCredentials",o)===!0&&(q.withCredentials=!0);const y=d("headers",o);y!==void 0&&y.forEach(E=>{q.setRequestHeader(E.name,E.value)});const j=d("sendRaw",o);o.forEach(E=>{n.updateFileStatus(E,"uploading",0),j!==!0&&S.append(d("fieldName",E),E,E.name),E.xhr=q,E.__abort=()=>{q.abort()},F+=E.size}),l("uploading",{files:o,xhr:q}),t.value.push(q),j===!0?q.send(new Blob(o)):q.send(S)}return{isUploading:f,isBusy:m,abort:u,upload:p}}const jl={name:zl,props:Nl,emits:Ul,injectPlugin:Dl},Il=Al(jl),ot=re({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const n=Fe(),t=_(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:t.value},Ce(l.default));const i=n.vnode.key,c=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(c===void 0)return;const{row:r}=e.props;return s("td",{class:t.value+c.__tdClass(r),style:c.__tdStyle(r)},Ce(l.default))}}}),Ql=re({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:n}){const t=Fe(),{proxy:{$q:i}}=t,c=r=>{n("click",r)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:c},Ce(l.default));let r,f;const m=t.vnode.key;if(m){if(r=e.props.colsMap[m],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const u=r.align==="right"?"unshift":"push";f=Gt(l.default,[]),f[u](s(oe,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else f=Ce(l.default);const w={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:u=>{r.sortable===!0&&e.props.sort(r),c(u)}};return s("th",w,f)}}});function ht(e,l){return s("div",e,[s("table",{class:"q-table"},l)])}const Vl={list:fl,table:vl},Ml=["list","table","__qtable"],Hl=re({name:"QVirtualScroll",props:{...gl,type:{type:String,default:"list",validator:e=>Ml.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Kt},setup(e,{slots:l,attrs:n}){let t;const i=z(null),c=_(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:f,padVirtualScroll:m,onVirtualScrollEvt:w}=ml({virtualScrollLength:c,getVirtualScrollTarget:o,getVirtualScrollEl:x}),u=_(()=>{if(c.value===0)return[];const d=(A,O)=>({index:r.value.from+O,item:A});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(d):e.itemsFn(r.value.from,r.value.to-r.value.from).map(d)}),p=_(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=_(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ne(c,()=>{f()}),ne(()=>e.scrollTarget,()=>{S(),h()});function x(){return i.value.$el||i.value}function o(){return t}function h(){t=Zt(x(),e.scrollTarget),t.addEventListener("scroll",w,Xe.passive)}function S(){t!==void 0&&(t.removeEventListener("scroll",w,Xe.passive),t=void 0)}function q(){let d=m(e.type==="list"?"div":"tbody",u.value.map(l.default));return l.before!==void 0&&(d=l.before().concat(d)),it(l.after,d)}return Jt(()=>{f()}),mt(()=>{h()}),Xt(()=>{h()}),Yt(()=>{S()}),ft(()=>{S()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ht({ref:i,class:"q-table__middle "+p.value},q()):s(Vl[e.type],{...n,ref:i,class:[n.class,p.value],...P.value},q)}}}),$l=()=>s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ve=re({name:"QCheckbox",props:pl,emits:hl,setup(e){const l=$l();function n(t,i){const c=_(()=>(t.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>c.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[s(oe,{class:"q-checkbox__icon",name:c.value})])]:[l]}return yl("checkbox",n)}});function Wl(e,l){return new Date(e)-new Date(l)}const Gl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Kl(e,l,n,t){const i=_(()=>{const{sortBy:f}=l.value;return f&&n.value.find(m=>m.name===f)||null}),c=_(()=>e.sortMethod!==void 0?e.sortMethod:(f,m,w)=>{const u=n.value.find(x=>x.name===m);if(u===void 0||u.field===void 0)return f;const p=w===!0?-1:1,P=typeof u.field=="function"?x=>u.field(x):x=>x[u.field];return f.sort((x,o)=>{let h=P(x),S=P(o);return u.rawSort!==void 0?u.rawSort(h,S,x,o)*p:h==null?-1*p:S==null?1*p:u.sort!==void 0?u.sort(h,S,x,o)*p:Me(h)===!0&&Me(S)===!0?(h-S)*p:Ye(h)===!0&&Ye(S)===!0?Wl(h,S)*p:typeof h=="boolean"&&typeof S=="boolean"?(h-S)*p:([h,S]=[h,S].map(q=>(q+"").toLocaleString().toLowerCase()),h<S?-1*p:h===S?0:p)})});function r(f){let m=e.columnSortOrder;if(gt(f)===!0)f.sortOrder&&(m=f.sortOrder),f=f.name;else{const p=n.value.find(P=>P.name===f);p!==void 0&&p.sortOrder&&(m=p.sortOrder)}let{sortBy:w,descending:u}=l.value;w!==f?(w=f,u=m==="da"):e.binaryStateSort===!0?u=!u:u===!0?m==="ad"?w=null:u=!1:m==="ad"?u=!0:w=null,t({sortBy:w,descending:u,page:1})}return{columnToSort:i,computedSortMethod:c,sort:r}}const Zl={filter:[String,Object],filterMethod:Function};function Jl(e,l){const n=_(()=>e.filterMethod!==void 0?e.filterMethod:(t,i,c,r)=>{const f=i?i.toLowerCase():"";return t.filter(m=>c.some(w=>{const u=r(w,m)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(f)!==-1}))});return ne(()=>e.filter,()=>{bt(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Xl(e,l){for(const n in l)if(l[n]!==e[n])return!1;return!0}function nt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Yl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ea(e,l){const{props:n,emit:t}=e,i=z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),c=_(()=>{const u=n["onUpdate:pagination"]!==void 0?{...i.value,...n.pagination}:i.value;return nt(u)}),r=_(()=>c.value.rowsNumber!==void 0);function f(u){m({pagination:u,filter:n.filter})}function m(u={}){bt(()=>{t("request",{pagination:u.pagination||c.value,filter:u.filter||n.filter,getCellValue:l})})}function w(u,p){const P=nt({...c.value,...u});if(Xl(c.value,P)===!0){r.value===!0&&p===!0&&f(P);return}if(r.value===!0){f(P);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?t("update:pagination",P):i.value=P}return{innerPagination:i,computedPagination:c,isServerSide:r,requestServerInteraction:m,setPagination:w}}function ta(e,l,n,t,i,c){const{props:r,emit:f,proxy:{$q:m}}=e,w=_(()=>t.value===!0?n.value.rowsNumber||0:c.value),u=_(()=>{const{page:O,rowsPerPage:U}=n.value;return(O-1)*U}),p=_(()=>{const{page:O,rowsPerPage:U}=n.value;return O*U}),P=_(()=>n.value.page===1),x=_(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/n.value.rowsPerPage))),o=_(()=>p.value===0?!0:n.value.page>=x.value),h=_(()=>(r.rowsPerPageOptions.includes(l.value.rowsPerPage)?r.rowsPerPageOptions:[l.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(U=>({label:U===0?m.lang.table.allRows:""+U,value:U})));ne(x,(O,U)=>{if(O===U)return;const B=n.value.page;O&&!B?i({page:1}):O<B&&i({page:O})});function S(){i({page:1})}function q(){const{page:O}=n.value;O>1&&i({page:O-1})}function d(){const{page:O,rowsPerPage:U}=n.value;p.value>0&&O*U<w.value&&i({page:O+1})}function A(){i({page:x.value})}return r["onUpdate:pagination"]!==void 0&&f("update:pagination",{...n.value}),{firstRowIndex:u,lastRowIndex:p,isFirstPage:P,isLastPage:o,pagesNumber:x,computedRowsPerPageOptions:h,computedRowsNumber:w,firstPage:S,prevPage:q,nextPage:d,lastPage:A}}const la={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},aa=["update:selected","selection"];function oa(e,l,n,t){const i=_(()=>{const o={};return e.selected.map(t.value).forEach(h=>{o[h]=!0}),o}),c=_(()=>e.selection!=="none"),r=_(()=>e.selection==="single"),f=_(()=>e.selection==="multiple"),m=_(()=>n.value.length!==0&&n.value.every(o=>i.value[t.value(o)]===!0)),w=_(()=>m.value!==!0&&n.value.some(o=>i.value[t.value(o)]===!0)),u=_(()=>e.selected.length);function p(o){return i.value[o]===!0}function P(){l("update:selected",[])}function x(o,h,S,q){l("selection",{rows:h,added:S,keys:o,evt:q});const d=r.value===!0?S===!0?h:[]:S===!0?e.selected.concat(h):e.selected.filter(A=>o.includes(t.value(A))===!1);l("update:selected",d)}return{hasSelectionMode:c,singleSelection:r,multipleSelection:f,allRowsSelected:m,someRowsSelected:w,rowsSelectedNumber:u,isRowSelected:p,clearSelection:P,updateSelection:x}}function rt(e){return Array.isArray(e)?e.slice():[]}const na={expanded:Array},ra=["update:expanded"];function ia(e,l){const n=z(rt(e.expanded));ne(()=>e.expanded,r=>{n.value=rt(r)});function t(r){return n.value.includes(r)}function i(r){e.expanded!==void 0?l("update:expanded",r):n.value=r}function c(r,f){const m=n.value.slice(),w=m.indexOf(r);f===!0?w===-1&&(m.push(r),i(m)):w!==-1&&(m.splice(w,1),i(m))}return{isRowExpanded:t,setExpanded:i,updateExpanded:c}}const sa={visibleColumns:Array};function ua(e,l,n){const t=_(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Me(f[m])?"right":"left",sortable:!0})):[]}),i=_(()=>{const{sortBy:f,descending:m}=l.value;return(e.visibleColumns!==void 0?t.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):t.value).map(u=>{const p=u.align||"right",P=`text-${p}`;return{...u,align:p,__iconClass:`q-table__sort-icon q-table__sort-icon--${p}`,__thClass:P+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===f?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>P+" "+u.classes:x=>P+" "+u.classes(x):()=>P}})}),c=_(()=>{const f={};return i.value.forEach(m=>{f[m.name]=m}),f}),r=_(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(n.value===!0?1:0));return{colList:t,computedCols:i,computedColsMap:c,computedColspan:r}}const Oe="q-table__bottom row items-center",yt={};_t.forEach(e=>{yt[e]={}});const ca=re({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...yt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ct,...Sl,...sa,...Zl,...Yl,...na,...la,...Gl},emits:["request","virtualScroll",...wl,...ra,...aa],setup(e,{slots:l,emit:n}){const t=Fe(),{proxy:{$q:i}}=t,c=dt(e,i),{inFullscreen:r,toggleFullscreen:f}=ql(),m=_(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),w=z(null),u=z(null),p=_(()=>e.grid!==!0&&e.virtualScroll===!0),P=_(()=>" q-table__card"+(c.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=_(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(c.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),o=_(()=>x.value+(e.loading===!0?" q-table--loading":""));ne(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{p.value===!0&&u.value!==null&&u.value.reset()});const{innerPagination:h,computedPagination:S,isServerSide:q,requestServerInteraction:d,setPagination:A}=ea(t,ce),{computedFilterMethod:O}=Jl(e,A),{isRowExpanded:U,setExpanded:B,updateExpanded:N}=ia(e,n),F=_(()=>{let a=e.rows;if(q.value===!0||a.length===0)return a;const{sortBy:b,descending:C}=S.value;return e.filter&&(a=O.value(a,e.filter,K.value,ce)),ie.value!==null&&(a=xe.value(e.rows===a?a.slice():a,b,C)),a}),g=_(()=>F.value.length),y=_(()=>{let a=F.value;if(q.value===!0)return a;const{rowsPerPage:b}=S.value;return b!==0&&(se.value===0&&e.rows!==a?a.length>Z.value&&(a=a.slice(0,Z.value)):a=a.slice(se.value,Z.value)),a}),{hasSelectionMode:j,singleSelection:E,multipleSelection:G,allRowsSelected:te,someRowsSelected:X,rowsSelectedNumber:$,isRowSelected:le,clearSelection:ke,updateSelection:ae}=oa(e,n,y,m),{colList:Pe,computedCols:K,computedColsMap:me,computedColspan:be}=ua(e,S,j),{columnToSort:ie,computedSortMethod:xe,sort:_e}=Kl(e,S,Pe,A),{firstRowIndex:se,lastRowIndex:Z,isFirstPage:v,isLastPage:R,pagesNumber:V,computedRowsPerPageOptions:J,computedRowsNumber:M,firstPage:ue,prevPage:Ae,nextPage:ze,lastPage:Ne}=ta(t,h,S,q,A,g),St=_(()=>y.value.length===0),wt=_(()=>{const a={};return _t.forEach(b=>{a[b]=e[b]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function qt(){p.value===!0&&u.value.reset()}function Ct(){if(e.grid===!0)return zt();const a=e.hideHeader!==!0?Ke:null;if(p.value===!0){const C=l["top-row"],k=l["bottom-row"],T={default:Q=>$e(Q.item,l.body,Q.index)};if(C!==void 0){const Q=s("tbody",C({cols:K.value}));T.before=a===null?()=>Q:()=>[a()].concat(Q)}else a!==null&&(T.before=a);return k!==void 0&&(T.after=()=>s("tbody",k({cols:K.value}))),s(Hl,{ref:u,class:e.tableClass,style:e.tableStyle,...wt.value,scrollTarget:e.virtualScrollTarget,items:y.value,type:"__qtable",tableColspan:be.value,onVirtualScroll:kt},T)}const b=[Pt()];return a!==null&&b.unshift(a()),ht({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},b)}function Ft(a,b){if(u.value!==null){u.value.scrollTo(a,b);return}a=parseInt(a,10);const C=w.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(C!==null){const k=w.value.querySelector(".q-table__middle.scroll"),T=C.offsetTop-e.virtualScrollStickySizeStart,Q=T<k.scrollTop?"decrease":"increase";k.scrollTop=T,n("virtualScroll",{index:a,from:0,to:h.value.rowsPerPage-1,direction:Q})}}function kt(a){n("virtualScroll",a)}function He(){return[s(_l,{class:"q-table__linear-progress",color:e.color,dark:c.value,indeterminate:!0,trackColor:"transparent"})]}function $e(a,b,C){const k=m.value(a),T=le(k);if(b!==void 0)return b(We({key:k,row:a,pageIndex:C,__trClass:T?"selected":""}));const Q=l["body-cell"],I=K.value.map(W=>{const Te=l[`body-cell-${W.name}`],Ee=Te!==void 0?Te:Q;return Ee!==void 0?Ee(xt({key:k,row:a,pageIndex:C,col:W})):s("td",{class:W.__tdClass(a),style:W.__tdStyle(a)},ce(W,a))});if(j.value===!0){const W=l["body-selection"],Te=W!==void 0?W(Bt({key:k,row:a,pageIndex:C})):[s(Ve,{modelValue:T,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(Ee,Nt)=>{ae([k],[a],Ee,Nt)}})];I.unshift(s("td",{class:"q-table--col-auto-width"},Te))}const Y={key:k,class:{selected:T}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=W=>{n("rowClick",W,a,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=W=>{n("rowDblclick",W,a,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=W=>{n("rowContextmenu",W,a,C)}),s("tr",Y,I)}function Pt(){const a=l.body,b=l["top-row"],C=l["bottom-row"];let k=y.value.map((T,Q)=>$e(T,a,Q));return b!==void 0&&(k=b({cols:K.value}).concat(k)),C!==void 0&&(k=k.concat(C({cols:K.value}))),s("tbody",k)}function We(a){return Ue(a),a.cols=a.cols.map(b=>ge({...b},"value",()=>ce(b,a.row))),a}function xt(a){return Ue(a),ge(a,"value",()=>ce(a.col,a.row)),a}function Bt(a){return Ue(a),a}function Ue(a){Object.assign(a,{cols:K.value,colsMap:me.value,sort:_e,rowIndex:se.value+a.pageIndex,color:e.color,dark:c.value,dense:e.dense}),j.value===!0&&ge(a,"selected",()=>le(a.key),(b,C)=>{ae([a.key],[a.row],b,C)}),ge(a,"expand",()=>U(a.key),b=>{N(a.key,b)})}function ce(a,b){const C=typeof a.field=="function"?a.field(b):b[a.field];return a.format!==void 0?a.format(C,b):C}const de=_(()=>({pagination:S.value,pagesNumber:V.value,isFirstPage:v.value,isLastPage:R.value,firstPage:ue,prevPage:Ae,nextPage:ze,lastPage:Ne,inFullscreen:r.value,toggleFullscreen:f}));function Tt(){const a=l.top,b=l["top-left"],C=l["top-right"],k=l["top-selection"],T=j.value===!0&&k!==void 0&&$.value>0,Q="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:Q},[a(de.value)]);let I;if(T===!0?I=k(de.value).slice():(I=[],b!==void 0?I.push(s("div",{class:"q-table__control"},[b(de.value)])):e.title&&I.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(I.push(s("div",{class:"q-table__separator col"})),I.push(s("div",{class:"q-table__control"},[C(de.value)]))),I.length!==0)return s("div",{class:Q},I)}const Ge=_(()=>X.value===!0?null:te.value);function Ke(){const a=Et();return e.loading===!0&&l.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:be.value},He())])),s("thead",a)}function Et(){const a=l.header,b=l["header-cell"];if(a!==void 0)return a(De({header:!0})).slice();const C=K.value.map(k=>{const T=l[`header-cell-${k.name}`],Q=T!==void 0?T:b,I=De({col:k});return Q!==void 0?Q(I):s(Ql,{key:k.name,props:I},()=>k.label)});if(E.value===!0&&e.grid!==!0)C.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(G.value===!0){const k=l["header-selection"],T=k!==void 0?k(De({})):[s(Ve,{color:e.color,modelValue:Ge.value,dark:c.value,dense:e.dense,"onUpdate:modelValue":Ze})];C.unshift(s("th",{class:"q-table--col-auto-width"},T))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function De(a){return Object.assign(a,{cols:K.value,sort:_e,colsMap:me.value,color:e.color,dark:c.value,dense:e.dense}),G.value===!0&&ge(a,"selected",()=>Ge.value,Ze),a}function Ze(a){X.value===!0&&(a=!1),ae(y.value.map(m.value),y.value,a)}const Be=_(()=>{const a=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?a.reverse():a});function Lt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,k=l["no-data"],T=k!==void 0?[k({message:C,icon:i.iconSet.table.warning,filter:e.filter})]:[s(oe,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),C];return s("div",{class:Oe+" q-table__bottom--nodata"},T)}const a=l.bottom;if(a!==void 0)return s("div",{class:Oe},[a(de.value)]);const b=e.hideSelectedBanner!==!0&&j.value===!0&&$.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)($.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Oe+" justify-end"},Ot(b));if(b.length!==0)return s("div",{class:Oe},b)}function Rt(a){A({page:1,rowsPerPage:a.value})}function Ot(a){let b;const{rowsPerPage:C}=S.value,k=e.paginationLabel||i.lang.table.pagination,T=l.pagination,Q=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),Q===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),s(bl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:J.value,displayValue:C===0?i.lang.table.allRows:C,dark:c.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Rt})])),T!==void 0)b=T(de.value);else if(b=[s("span",C!==0?{class:"q-table__bottom-item"}:{},[C?k(se.value+1,Math.min(Z.value,M.value),M.value):k(1,g.value,M.value)])],C!==0&&V.value>1){const I={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(I.size="sm"),V.value>2&&b.push(s(H,{key:"pgFirst",...I,icon:Be.value[0],disable:v.value,onClick:ue})),b.push(s(H,{key:"pgPrev",...I,icon:Be.value[1],disable:v.value,onClick:Ae}),s(H,{key:"pgNext",...I,icon:Be.value[2],disable:R.value,onClick:ze})),V.value>2&&b.push(s(H,{key:"pgLast",...I,icon:Be.value[3],disable:R.value,onClick:Ne}))}return a.push(s("div",{class:"q-table__control"},b)),a}function At(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[Ke()])]:e.loading===!0&&l.loading===void 0?He():void 0;return s("div",{class:"q-table__middle"},a)}function zt(){const a=l.item!==void 0?l.item:b=>{const C=b.cols.map(T=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[T.label]),s("div",{class:"q-table__grid-item-value"},[T.value])]));if(j.value===!0){const T=l["body-selection"],Q=T!==void 0?T(b):[s(Ve,{modelValue:b.selected,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(I,Y)=>{ae([b.key],[b.row],I,Y)}})];C.unshift(s("div",{class:"q-table__grid-item-row"},Q),s(dl,{dark:c.value}))}const k={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=T=>{n("RowClick",T,b.row,b.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=T=>{n("RowDblclick",T,b.row,b.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(b.selected===!0?" q-table__grid-item--selected":"")},[s("div",k,C)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},y.value.map((b,C)=>a(We({key:m.value(b),row:b,pageIndex:C}))))}return Object.assign(t.proxy,{requestServerInteraction:d,setPagination:A,firstPage:ue,prevPage:Ae,nextPage:ze,lastPage:Ne,isRowSelected:le,clearSelection:ke,isRowExpanded:U,setExpanded:B,sort:_e,resetVirtualScroll:qt,scrollTo:Ft,getCellValue:ce}),vt(t.proxy,{filteredSortedRows:()=>F.value,computedRows:()=>y.value,computedRowsNumber:()=>M.value}),()=>{const a=[Tt()],b={ref:w,class:o.value};return e.grid===!0?a.push(At()):Object.assign(b,{class:[b.class,e.cardClass],style:e.cardStyle}),a.push(Ct(),Lt()),e.loading===!0&&l.loading!==void 0&&a.push(l.loading()),s("div",b,a)}}}),da=el({__name:"AdminFilesPage",setup(e,{expose:l}){l();const n=tl(),t=z(""),i=z(!1),c=z([]),r=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:F=>B(F,0)}],f=z([]),m=z(""),w=z(!1),u=z(""),p=z(!1),P=z(!1),x=z({rowsPerPage:0});mt(()=>{q()}),ne(t,F=>{q(F)});const o=_(()=>t.value?U(t.value).split("/"):[]),h=F=>{F.is_dir?t.value=F.filepath:pe(`/api/admin/files/file/${F.filepath}`,{}).then(g=>g.blob()).then(g=>window.open(URL.createObjectURL(g)))},S=(F=-1)=>{t.value=o.value.slice(0,F+1).join("/")};async function q(F=""){i.value=!0,f.value=[];try{const g=await pe(`/api/admin/files/list/${F}`,{method:"GET",headers:{"Content-Type":"application/json"}}),y=await g.json();if(g.ok)c.value=y;else throw console.error(y),`Error ${g.status} getting listing. Please check logs.`}catch(g){console.error(g),n.notify({message:String(g),caption:"Request Error!",color:"negative"})}i.value=!1}async function d(F=[]){try{const g=await pe("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(g.ok){n.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});const y=await g.blob(),j=window.URL.createObjectURL(y);window.location.assign(j)}else{const y=await g.json();throw console.error(y),`Error ${g.status} creating zip. Please check logs.`}}catch(g){console.error(g),n.notify({message:String(g),caption:"Request Error!",color:"negative"})}}async function A(F=[]){try{const g=await pe("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(g.ok)n.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else throw console.error(g),`Error ${g.status} deleting items. Please check logs.`}catch(g){console.error(g),n.notify({message:String(g),caption:"Request Error!",color:"negative"})}q(t.value)}async function O(F){let g=F;t.value&&(g=t.value+"/"+g),console.log(g);try{const y=await pe("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),j=await y.json();if(y.ok)n.notify({message:`Folder "${F}" created.`,caption:"Files",type:"positive"}),q(t.value);else throw console.error(j),`Error ${y.status} while creating folder. Please check logs.`}catch(y){console.error(y),n.notify({message:String(y),caption:"Request Error!",color:"negative"})}}const U=F=>F.split("/").filter(g=>g!=="").join("/"),B=(F,g=2)=>{if(!+F)return"0 Bytes";const y=1024,j=g<0?0:g,E=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],G=Math.floor(Math.log(F)/Math.log(y));return`${parseFloat((F/Math.pow(y,G)).toFixed(j))} ${E[G]}`},N={$q:n,folder_current:t,folder_loading:i,folder_rows:c,folder_columns:r,selected:f,filter:m,dialog_create_new_folder:w,new_folder_name:u,confirm_delete:p,dialog_upload_files:P,pagination:x,breadcrumbs:o,onNameClick:h,onBreadcrumbClick:S,getFolderContent:q,getZip:d,deleteItems:A,createNewFolder:O,trimSlashes:U,formatBytes:B,get getAccessToken(){return ll}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),fa={class:"q-pa-md"},va={class:"text-h6"},ga={class:"text-h6"},ma=["onClick"],ba={class:"q-ml-sm"};function _a(e,l,n,t,i,c){return he(),Le(Cl,{id:"admin-files-page",padding:""},{default:D(()=>[fe("div",fa,[L(kl,{gutter:"sm",style:{cursor:"pointer"}},{default:D(()=>[L(lt,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"sym_o_home",onClick:l[0]||(l[0]=r=>t.onBreadcrumbClick(-1))},null,8,["label"]),(he(!0),ol(nl,null,rl(t.breadcrumbs,(r,f)=>(he(),Le(lt,{key:f,onClick:m=>t.onBreadcrumbClick(f)},{default:D(()=>[il(ye(r),1)]),_:2},1032,["onClick"]))),128))]),_:1}),L(je,{modelValue:t.dialog_create_new_folder,"onUpdate:modelValue":l[4]||(l[4]=r=>t.dialog_create_new_folder=r)},{default:D(()=>[L(Ie,{style:{"min-width":"350px"}},{default:D(()=>[L(Se,null,{default:D(()=>[fe("div",va,ye(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),L(Se,{class:"q-pt-none"},{default:D(()=>[L(et,{modelValue:t.new_folder_name,"onUpdate:modelValue":l[1]||(l[1]=r=>t.new_folder_name=r),dense:"",autofocus:"",onKeyup:l[2]||(l[2]=sl(r=>[t.createNewFolder(t.new_folder_name),t.dialog_create_new_folder=!1],["enter"]))},null,8,["modelValue"])]),_:1}),L(Qe,{align:"right",class:"text-primary"},{default:D(()=>[we(L(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[qe]]),we(L(H,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:l[3]||(l[3]=r=>t.createNewFolder(t.new_folder_name))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L(je,{modelValue:t.dialog_upload_files,"onUpdate:modelValue":l[7]||(l[7]=r=>t.dialog_upload_files=r)},{default:D(()=>[L(Ie,{style:{"min-width":"350px"}},{default:D(()=>[L(Se,null,{default:D(()=>[fe("div",ga,ye(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),L(Se,{class:"q-pt-none"},{default:D(()=>[L(Il,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:t.folder_current}],headers:[{name:"authorization",value:`Bearer ${t.getAccessToken()}`}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:l[5]||(l[5]=r=>t.getFolderContent(t.folder_current)),onUploaded:l[6]||(l[6]=r=>t.dialog_upload_files=!1)},null,8,["form-fields","headers"])]),_:1}),L(Qe,{align:"right",class:"text-primary"},{default:D(()=>[we(L(H,{flat:"",label:"Cancel"},null,512),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L(ca,{selected:t.selected,"onUpdate:selected":l[15]||(l[15]=r=>t.selected=r),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:t.pagination,rows:t.folder_rows,filter:t.filter,columns:t.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:t.folder_loading,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":D(r=>[L(ot,{props:r},{default:D(()=>[r.value?(he(),Le(oe,{key:0,name:"sym_o_folder"})):(he(),Le(oe,{key:1,name:"sym_o_description"}))]),_:2},1032,["props"])]),"body-cell-name":D(r=>[L(ot,{props:r,style:{cursor:"pointer"}},{default:D(()=>[fe("div",{onClick:f=>t.onNameClick(r.row)},ye(r.value),9,ma)]),_:2},1032,["props"])]),"top-left":D(()=>[L(je,{modelValue:t.confirm_delete,"onUpdate:modelValue":l[9]||(l[9]=r=>t.confirm_delete=r)},{default:D(()=>[L(Ie,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:D(()=>[L(Se,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:D(()=>[L(ul,{icon:"sym_o_delete",color:"negative","text-color":"white"}),fe("span",ba,ye(e.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),L(Qe,{align:"right"},{default:D(()=>[we(L(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[qe]]),we(L(H,{label:e.$t("yes, delete"),color:"negative",onClick:l[8]||(l[8]=r=>t.deleteItems(t.selected))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[L(H,{disable:t.folder_loading,label:e.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:l[10]||(l[10]=r=>t.dialog_create_new_folder=!0)},null,8,["disable","label"]),L(H,{class:"q-ml-sm",disable:t.folder_loading,label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:l[11]||(l[11]=r=>t.dialog_upload_files=!0)},null,8,["disable","label"]),L(H,{class:"q-ml-sm",disable:t.selected.length==0,label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:l[12]||(l[12]=r=>t.getZip(t.selected))},null,8,["disable","label"]),L(H,{class:"q-ml-sm",color:"negative",disable:t.selected.length==0,label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:l[13]||(l[13]=r=>t.confirm_delete=!0)},null,8,["disable","label"])])]),"top-right":D(()=>[L(et,{modelValue:t.filter,"onUpdate:modelValue":l[14]||(l[14]=r=>t.filter=r),borderless:"",dense:"",debounce:"300",placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:D(()=>[L(oe,{name:"sym_o_search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","loading"])])]),_:1})}const Aa=al(da,[["render",_a],["__file","AdminFilesPage.vue"]]);export{Aa as default};
