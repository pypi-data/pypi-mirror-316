import{P as w,R as M,s as q,z as C,S as h,e as d,y as m,T,U as V,N as B,d as k,_ as I,f as l,g as u,m as f,p as v,i as G,V as E,r as Q,k as y,l as _,F as j,G as D,W as $}from"./index-DFt1AGAb.js";import{Q as L}from"./QPage-BSM4c28G.js";import{Q as N}from"./QImg-DK7u65Ck.js";const p={threshold:0,root:null,rootMargin:"0px"};function S(e,t,n){let i,r,o;typeof n=="function"?(i=n,r=p,o=t.cfg===void 0):(i=n.handler,r=Object.assign({},p,n.cfg),o=t.cfg===void 0||M(t.cfg,r)===!1),t.handler!==i&&(t.handler=i),o===!0&&(t.cfg=r,t.observer!==void 0&&t.observer.unobserve(e),t.observer=new IntersectionObserver(([s])=>{if(typeof t.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(s,t.observer)===!1||t.once===!0&&s.isIntersecting===!0)&&P(e)}},r),t.observer.observe(e))}function P(e){const t=e.__qvisible;t!==void 0&&(t.observer!==void 0&&t.observer.unobserve(e),delete e.__qvisible)}const O=w({name:"intersection",mounted(e,{modifiers:t,value:n}){const i={once:t.once===!0};S(e,i,n),e.__qvisible=i},updated(e,t){const n=e.__qvisible;n!==void 0&&S(e,n,t.value)},beforeUnmount:P}),F=q({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:n}){const i=C(h.value===!0?e.ssrPrerender:!1),r=d(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:g,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:g),o=d(()=>e.disable!==!0&&(h.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=d(()=>[[O,r.value,void 0,{once:e.once}]]),a=d(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function g(c){i.value!==c.isIntersecting&&(i.value=c.isIntersecting,e.onVisibility!==void 0&&n("visibility",i.value))}function b(){if(i.value===!0)return[m("div",{key:"content",style:a.value},B(t.default))];if(t.hidden!==void 0)return[m("div",{key:"hidden",style:a.value},t.hidden())]}return()=>{const c=e.transition?[m(T,{name:"q-transition--"+e.transition},b)]:b();return V(e.tag,{class:"q-intersection"},c,"main",o.value,()=>s.value)}}}),H=k({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),R={key:0},A={key:1},U={class:"absolute-full"},Y=["src"];function z(e,t,n,i,r,o){return n.item.media_type!="video"?(l(),u("div",R,[f(N,{src:n.item.thumbnail,loading:"eager","no-transition":"","no-spinner":"",ratio:1,class:"rounded-borders"},null,8,["src"])])):(l(),u("div",A,[t[0]||(t[0]=v("div",{style:{"padding-bottom":"100%"}},null,-1)),v("div",U,[v("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:n.item.thumbnail,class:"rounded-borders"},null,8,Y)])]))}const W=I(H,[["render",z],["__file","MediaItemThumbnailViewer.vue"]]),J=k({__name:"GalleryPage",setup(e,{expose:t}){t();const n=G(),i=E(),r=d(()=>i.collection_number_of_items==0),o={configurationStore:n,mediacollectionStore:i,isGalleryEmpty:r,MediaItemThumbnailViewer:W};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),K={key:0,class:"row justify-center q-gutter-sm"},X=["innerHTML"];function Z(e,t,n,i,r,o){const s=Q("router-link");return l(),y(L,{id:"gallery-page",padding:""},{default:_(()=>[i.isGalleryEmpty?(l(),u("div",{key:1,innerHTML:i.configurationStore.getConfigElement("uisettings.GALLERY_EMPTY_MSG")},null,8,X)):(l(),u("div",K,[(l(!0),u(j,null,D(i.mediacollectionStore.collection,a=>(l(),y(F,{key:a.id,once:"",class:"preview-item"},{default:_(()=>[f(s,{to:{name:"mediaviewer",params:{id:a.id}}},{default:_(()=>[f($,{class:"q-ma-xs no-shadow"},{default:_(()=>[f(i.MediaItemThumbnailViewer,{item:a},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]))]),_:1})}const ne=I(J,[["render",Z],["__scopeId","data-v-21f5a9c6"],["__file","GalleryPage.vue"]]);export{ne as default};
