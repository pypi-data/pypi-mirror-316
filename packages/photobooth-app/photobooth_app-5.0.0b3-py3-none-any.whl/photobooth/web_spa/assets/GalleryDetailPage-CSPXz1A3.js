import{Q as Lt}from"./QHeader-D3xELS5a.js";import{u as Ft,a as Ut,b as Vt,c as xt,T as Qt,Q as Ot}from"./use-panel-ALRVZ6Fn.js";import{Q as Bt}from"./QPageSticky-DxQ9EuIF.js";import{Q as zt}from"./QPage-BSM4c28G.js";import{Q as Ht,a as Kt}from"./QLayout-DM2ag1m_.js";import{X as Le,Y as jt,Z as St,d as $,E as ne,_ as Y,f as P,g as J,G as Ve,k as D,l as R,n as Fe,q as k,p as K,t as G,H as Gt,Q as O,F as oe,z as j,m as N,D as le,W as xe,$ as re,a0 as Jt,a1 as Yt,B as Ue,a2 as Ge,a3 as $t,A as Qe,o as Tt,a4 as Oe,a5 as Wt,a6 as Xt,a7 as Zt,w as ie,s as It,e as L,y as V,N as en,L as tn,M as nn,U as rn,O as on,a8 as an,u as sn,j as ln,i as un,V as cn,a9 as dn,J as fn}from"./index-DFt1AGAb.js";import{Q as Je}from"./QBadge-BHJWO245.js";import{Q as At}from"./QLinearProgress-D5MFhoX0.js";import{Q as gn}from"./QImg-DK7u65Ck.js";import{u as hn,a as mn,b as wn}from"./use-fullscreen-D_yNEDpZ.js";import{M as _n,I as yn}from"./ItemNotAvailableError-d5y_I2Iu.js";import"./selection-9dIG8Qc1.js";import"./format-CJebrXOQ.js";function pn(n){const o=Object.assign({noopener:!0},n),i=[];for(const e in o){const t=o[e];t===!0?i.push(e):(St(t)||typeof t=="string"&&t!=="")&&i.push(e+"="+t)}return i.join(",")}function Ye(n,o,i){let e=window.open;if(Le.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)e=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(n,{openExternal:!0})}const t=e(n,"_blank",pn(i));if(t)return Le.is.desktop&&t.focus(),t;o&&o()}const vn=(n,o,i)=>{if(Le.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(e=>{e?window.SafariViewController.show({url:n},jt,o):Ye(n,o,i)});return}return Ye(n,o,i)},Cn=$({__name:"ShareTriggerButtons",props:{triggers:{},directAccessNumberOfButtons:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(n,{expose:o,emit:i}){o();const e=n;function t(s){return console.log(e.currentItemIsImage,s),!e.currentItemIsImage&&s}const r=i;function a(s){console.log(`trigger share config_index ${s}`),r("triggerAction",s)}const l={props:e,getShareAvailable:t,emit:r,triggerButtonClick:a,get isEmpty(){return ne.isEmpty}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function bn(n,o,i,e,t,r){return P(!0),J(oe,null,Ve(i.triggers,(a,l)=>(P(),J("div",{key:l},[a.show_button&&!(e.isEmpty(a.title)&&e.isEmpty(a.icon))?(P(),D(O,{key:0,stack:"",rounded:"","no-caps":"",color:"primary",disabled:e.getShareAvailable(a.handles_images_only),class:Gt(["q-mr-sm action-button action-button-share col-auto",["share-button-"+l]]),onClick:s=>e.triggerButtonClick(a.config_index)},{default:R(()=>[e.isEmpty(a.icon)?k("",!0):(P(),D(Fe,{key:0,name:`sym_o_${a.icon}`},null,8,["name"])),K("div",null,G(a.title),1)]),_:2},1032,["disabled","class","onClick"])):k("",!0)]))),128)}const En=Y(Cn,[["render",bn],["__file","ShareTriggerButtons.vue"]]),Bn=$({__name:"PageToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareDirectAccessButtons:{},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(n,{expose:o,emit:i}){o();const e=j(!1),t=n,r=i;function a(f){r("triggerShareAction",f)}function l(){r("triggerToggleDisplayFilter")}function s(f){r("triggerDeleteMediaitem",f)}const u={confirmDeleteDialog:e,props:t,emit:r,invokeShareAction:a,invokeToggleDisplayFilter:l,invokeDeleteMediaitem:s,get openURL(){return vn},ShareTriggerButtons:En};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Sn={class:"q-mb-lg action-buttons col"},Tn={class:"q-pa-md row"},In={class:"q-mr-sm row flex flex-center"},An={class:"q-ml-sm"};function Pn(n,o,i,e,t,r){return P(),J(oe,null,[i.item?(P(),D(Bt,{key:0,position:"bottom",id:"gallery-toolbar",class:"toolbar"},{default:R(()=>[K("div",Sn,[K("div",Tn,[i.showDelete?(P(),D(O,{key:0,stack:"",rounded:"",class:"q-mr-sm action-button action-button-delete col-auto",color:"primary","no-caps":"",icon:"sym_o_delete",label:n.$t("BTN_LABEL_GALLERY_DELETE"),onClick:o[0]||(o[0]=a=>e.confirmDeleteDialog=!0)},null,8,["label"])):k("",!0),i.showFilter?(P(),D(O,{key:1,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-filter col-auto",icon:"sym_o_filter",label:n.$t("BTN_LABEL_GALLERY_FILTER"),disabled:!i.enableFilter,onClick:e.invokeToggleDisplayFilter},null,8,["label","disabled"])):k("",!0),i.showDownload?(P(),D(O,{key:2,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-download col-auto",icon:"sym_o_download",label:n.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:o[1]||(o[1]=a=>e.openURL(i.item.full))},null,8,["label"])):k("",!0),i.showShare?(P(),D(e.ShareTriggerButtons,{key:3,triggers:i.shareButtons,"direct-access-number-of-buttons":i.shareDirectAccessButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(i.item.media_type),onTriggerAction:e.invokeShareAction},null,8,["triggers","direct-access-number-of-buttons","current-item-is-image"])):k("",!0)]),K("div",In,[N(Je,{color:"grey-8",class:"q-mr-xs"},{default:R(()=>[N(Fe,{name:"sym_o_image",color:"white",class:"q-mr-xs"}),le(" "+G(i.item.caption),1)]),_:1}),e.props.image_number&&e.props.images_total?(P(),D(Je,{key:0,color:"grey-8",class:"q-mr-xs"},{default:R(()=>[N(Fe,{name:"sym_o_tag",color:"white",class:"q-mr-xs"}),le(" "+G(n.$t("LABEL_ELEMENT_X_OF_Y",{no:e.props.image_number,total:e.props.images_total})),1)]),_:1})):k("",!0)])])]),_:1})):k("",!0),N($t,{modelValue:e.confirmDeleteDialog,"onUpdate:modelValue":o[3]||(o[3]=a=>e.confirmDeleteDialog=a)},{default:R(()=>[N(xe,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:R(()=>[N(re,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:R(()=>[N(Jt,{icon:"sym_o_delete",color:"primary","text-color":"white"}),K("span",An,G(n.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),N(Yt,{align:"right"},{default:R(()=>[Ue(N(O,{flat:"",label:n.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[Ge]]),Ue(N(O,{label:n.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:o[2]||(o[2]=a=>[e.invokeDeleteMediaitem(i.item.id),n.$emit("closeEvent")])},null,8,["label"]),[[Ge]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Mn=Y(Bn,[["render",Pn],["__file","PageToolbar.vue"]]),Rn=$({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(n,{expose:o,emit:i}){o();const e=n,t=j(0);let r;const a=i;function l(){clearInterval(r),t.value=0}function s(){t.value=e.duration,r=window.setInterval(()=>{t.value-=.1,t.value<=0&&(clearInterval(r),a("triggerTimeout"))},100)}Qe(()=>{s()}),Tt(()=>{l()});const u={props:e,remainingSeconds:t,get intervalTimerId(){return r},set intervalTimerId(f){r=f},emit:a,abortTimer:l,startTimer:s};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function Nn(n,o,i,e,t,r){return e.remainingSeconds>=0?(P(),D(At,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:e.remainingSeconds/e.props.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):k("",!0)}const qn=Y(Rn,[["render",Nn],["__file","HeaderCountdownTimer.vue"]]),Dn={};function kn(n,o){return P(),D(At,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const Ln=Y(Dn,[["render",kn],["__file","HeaderProcessing.vue"]]),Fn=$({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(n,{expose:o,emit:i}){o();const e=n,t=i;function r(l){t("triggerApplyFilter",e.id,l)}const a={props:e,emit:t,applyFilterClick:r};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),Un={class:"text-center text-overline"},Vn={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}};function xn(n,o,i,e,t,r){return P(),J(oe,null,[K("div",Un,G(n.$t("Choose your filter")),1),(P(!0),J(oe,null,Ve(i.availableFilter,a=>(P(),D(xe,{key:a,bordered:"",class:"q-mb-sm no-shadow"},{default:R(()=>[N(re,{class:"q-pa-none"},{default:R(()=>[N(gn,{class:"rounded-borders",loading:"lazy",src:`/api/mediaprocessing/preview/${i.id}/${a}`,onClick:l=>e.applyFilterClick(a)},{default:R(()=>[K("div",Vn,G(a),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))],64)}const Qn=Y(Fn,[["render",xn],["__file","DrawerFilter.vue"]]),On=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const zn=()=>{};function Hn(...n){if(n.length!==1)return Oe(...n);const o=n[0];return typeof o=="function"?Wt(Xt(()=>({get:o,set:zn}))):j(o)}var ee={},ge,$e;function Kn(){return $e||($e=1,ge=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ge}var he={},H={},We;function W(){if(We)return H;We=1;let n;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return H.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},H.getSymbolTotalCodewords=function(e){return o[e]},H.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e},H.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');n=e},H.isKanjiModeEnabled=function(){return typeof n<"u"},H.toSJIS=function(e){return n(e)},H}var me={},Xe;function ze(){return Xe||(Xe=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function o(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+i)}}n.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},n.from=function(e,t){if(n.isValid(e))return e;try{return o(e)}catch{return t}}}(me)),me}var we,Ze;function jn(){if(Ze)return we;Ze=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(o){const i=Math.floor(o/8);return(this.buffer[i]>>>7-o%8&1)===1},put:function(o,i){for(let e=0;e<i;e++)this.putBit((o>>>i-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),o&&(this.buffer[i]|=128>>>this.length%8),this.length++}},we=n,we}var _e,et;function Gn(){if(et)return _e;et=1;function n(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}return n.prototype.set=function(o,i,e,t){const r=o*this.size+i;this.data[r]=e,t&&(this.reservedBit[r]=!0)},n.prototype.get=function(o,i){return this.data[o*this.size+i]},n.prototype.xor=function(o,i,e){this.data[o*this.size+i]^=e},n.prototype.isReserved=function(o,i){return this.reservedBit[o*this.size+i]},_e=n,_e}var ye={},tt;function Jn(){return tt||(tt=1,function(n){const o=W().getSymbolSize;n.getRowColCoords=function(e){if(e===1)return[];const t=Math.floor(e/7)+2,r=o(e),a=r===145?26:Math.ceil((r-13)/(2*t-2))*2,l=[r-7];for(let s=1;s<t-1;s++)l[s]=l[s-1]-a;return l.push(6),l.reverse()},n.getPositions=function(e){const t=[],r=n.getRowColCoords(e),a=r.length;for(let l=0;l<a;l++)for(let s=0;s<a;s++)l===0&&s===0||l===0&&s===a-1||l===a-1&&s===0||t.push([r[l],r[s]]);return t}}(ye)),ye}var pe={},nt;function Yn(){if(nt)return pe;nt=1;const n=W().getSymbolSize,o=7;return pe.getPositions=function(e){const t=n(e);return[[0,0],[t-o,0],[0,t-o]]},pe}var ve={},rt;function $n(){return rt||(rt=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};n.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},n.from=function(t){return n.isValid(t)?parseInt(t,10):void 0},n.getPenaltyN1=function(t){const r=t.size;let a=0,l=0,s=0,u=null,f=null;for(let C=0;C<r;C++){l=s=0,u=f=null;for(let p=0;p<r;p++){let m=t.get(C,p);m===u?l++:(l>=5&&(a+=o.N1+(l-5)),u=m,l=1),m=t.get(p,C),m===f?s++:(s>=5&&(a+=o.N1+(s-5)),f=m,s=1)}l>=5&&(a+=o.N1+(l-5)),s>=5&&(a+=o.N1+(s-5))}return a},n.getPenaltyN2=function(t){const r=t.size;let a=0;for(let l=0;l<r-1;l++)for(let s=0;s<r-1;s++){const u=t.get(l,s)+t.get(l,s+1)+t.get(l+1,s)+t.get(l+1,s+1);(u===4||u===0)&&a++}return a*o.N2},n.getPenaltyN3=function(t){const r=t.size;let a=0,l=0,s=0;for(let u=0;u<r;u++){l=s=0;for(let f=0;f<r;f++)l=l<<1&2047|t.get(u,f),f>=10&&(l===1488||l===93)&&a++,s=s<<1&2047|t.get(f,u),f>=10&&(s===1488||s===93)&&a++}return a*o.N3},n.getPenaltyN4=function(t){let r=0;const a=t.data.length;for(let s=0;s<a;s++)r+=t.data[s];return Math.abs(Math.ceil(r*100/a/5)-10)*o.N4};function i(e,t,r){switch(e){case n.Patterns.PATTERN000:return(t+r)%2===0;case n.Patterns.PATTERN001:return t%2===0;case n.Patterns.PATTERN010:return r%3===0;case n.Patterns.PATTERN011:return(t+r)%3===0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2===0;case n.Patterns.PATTERN101:return t*r%2+t*r%3===0;case n.Patterns.PATTERN110:return(t*r%2+t*r%3)%2===0;case n.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}n.applyMask=function(t,r){const a=r.size;for(let l=0;l<a;l++)for(let s=0;s<a;s++)r.isReserved(s,l)||r.xor(s,l,i(t,s,l))},n.getBestMask=function(t,r){const a=Object.keys(n.Patterns).length;let l=0,s=1/0;for(let u=0;u<a;u++){r(u),n.applyMask(u,t);const f=n.getPenaltyN1(t)+n.getPenaltyN2(t)+n.getPenaltyN3(t)+n.getPenaltyN4(t);n.applyMask(u,t),f<s&&(s=f,l=u)}return l}}(ve)),ve}var se={},ot;function Pt(){if(ot)return se;ot=1;const n=ze(),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return se.getBlocksCount=function(t,r){switch(r){case n.L:return o[(t-1)*4+0];case n.M:return o[(t-1)*4+1];case n.Q:return o[(t-1)*4+2];case n.H:return o[(t-1)*4+3];default:return}},se.getTotalCodewordsCount=function(t,r){switch(r){case n.L:return i[(t-1)*4+0];case n.M:return i[(t-1)*4+1];case n.Q:return i[(t-1)*4+2];case n.H:return i[(t-1)*4+3];default:return}},se}var Ce={},te={},it;function Wn(){if(it)return te;it=1;const n=new Uint8Array(512),o=new Uint8Array(256);return function(){let e=1;for(let t=0;t<255;t++)n[t]=e,o[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),te.log=function(e){if(e<1)throw new Error("log("+e+")");return o[e]},te.exp=function(e){return n[e]},te.mul=function(e,t){return e===0||t===0?0:n[o[e]+o[t]]},te}var at;function Xn(){return at||(at=1,function(n){const o=Wn();n.mul=function(e,t){const r=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let l=0;l<t.length;l++)r[a+l]^=o.mul(e[a],t[l]);return r},n.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){const a=r[0];for(let s=0;s<t.length;s++)r[s]^=o.mul(t[s],a);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},n.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=n.mul(t,new Uint8Array([1,o.exp(r)]));return t}}(Ce)),Ce}var be,st;function Zn(){if(st)return be;st=1;const n=Xn();function o(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return o.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=n.mod(t,this.genPoly),a=this.degree-r.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(r,a),l}return r},be=o,be}var Ee={},Be={},Se={},lt;function Mt(){return lt||(lt=1,Se.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}),Se}var U={},ut;function Rt(){if(ut)return U;ut=1;const n="[0-9]+",o="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;U.KANJI=new RegExp(i,"g"),U.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),U.BYTE=new RegExp(e,"g"),U.NUMERIC=new RegExp(n,"g"),U.ALPHANUMERIC=new RegExp(o,"g");const t=new RegExp("^"+i+"$"),r=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return U.testKanji=function(s){return t.test(s)},U.testNumeric=function(s){return r.test(s)},U.testAlphanumeric=function(s){return a.test(s)},U}var ct;function X(){return ct||(ct=1,function(n){const o=Mt(),i=Rt();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(r,a){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!o.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?r.ccBits[0]:a<27?r.ccBits[1]:r.ccBits[2]},n.getBestModeForData=function(r){return i.testNumeric(r)?n.NUMERIC:i.testAlphanumeric(r)?n.ALPHANUMERIC:i.testKanji(r)?n.KANJI:n.BYTE},n.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},n.isValid=function(r){return r&&r.bit&&r.ccBits};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}n.from=function(r,a){if(n.isValid(r))return r;try{return e(r)}catch{return a}}}(Be)),Be}var dt;function er(){return dt||(dt=1,function(n){const o=W(),i=Pt(),e=ze(),t=X(),r=Mt(),a=7973,l=o.getBCHDigit(a);function s(p,m,S){for(let A=1;A<=40;A++)if(m<=n.getCapacity(A,S,p))return A}function u(p,m){return t.getCharCountIndicator(p,m)+4}function f(p,m){let S=0;return p.forEach(function(A){const M=u(A.mode,m);S+=M+A.getBitsLength()}),S}function C(p,m){for(let S=1;S<=40;S++)if(f(p,S)<=n.getCapacity(S,m,t.MIXED))return S}n.from=function(m,S){return r.isValid(m)?parseInt(m,10):S},n.getCapacity=function(m,S,A){if(!r.isValid(m))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=t.BYTE);const M=o.getSymbolTotalCodewords(m),b=i.getTotalCodewordsCount(m,S),I=(M-b)*8;if(A===t.MIXED)return I;const B=I-u(A,m);switch(A){case t.NUMERIC:return Math.floor(B/10*3);case t.ALPHANUMERIC:return Math.floor(B/11*2);case t.KANJI:return Math.floor(B/13);case t.BYTE:default:return Math.floor(B/8)}},n.getBestVersionForData=function(m,S){let A;const M=e.from(S,e.M);if(Array.isArray(m)){if(m.length>1)return C(m,M);if(m.length===0)return 1;A=m[0]}else A=m;return s(A.mode,A.getLength(),M)},n.getEncodedBits=function(m){if(!r.isValid(m)||m<7)throw new Error("Invalid QR Code version");let S=m<<12;for(;o.getBCHDigit(S)-l>=0;)S^=a<<o.getBCHDigit(S)-l;return m<<12|S}}(Ee)),Ee}var Te={},ft;function tr(){if(ft)return Te;ft=1;const n=W(),o=1335,i=21522,e=n.getBCHDigit(o);return Te.getEncodedBits=function(r,a){const l=r.bit<<3|a;let s=l<<10;for(;n.getBCHDigit(s)-e>=0;)s^=o<<n.getBCHDigit(s)-e;return(l<<10|s)^i},Te}var Ie={},Ae,gt;function nr(){if(gt)return Ae;gt=1;const n=X();function o(i){this.mode=n.NUMERIC,this.data=i.toString()}return o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t,r,a;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),a=parseInt(r,10),e.put(a,10);const l=this.data.length-t;l>0&&(r=this.data.substr(t),a=parseInt(r,10),e.put(a,l*3+1))},Ae=o,Ae}var Pe,ht;function rr(){if(ht)return Pe;ht=1;const n=X(),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=n.ALPHANUMERIC,this.data=e}return i.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let a=o.indexOf(this.data[r])*45;a+=o.indexOf(this.data[r+1]),t.put(a,11)}this.data.length%2&&t.put(o.indexOf(this.data[r]),6)},Pe=i,Pe}var Me,mt;function or(){if(mt)return Me;mt=1;const n=X();function o(i){this.mode=n.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return o.getBitsLength=function(e){return e*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)},Me=o,Me}var Re,wt;function ir(){if(wt)return Re;wt=1;const n=X(),o=W();function i(e){this.mode=n.KANJI,this.data=e}return i.getBitsLength=function(t){return t*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=o.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}},Re=i,Re}var Ne={exports:{}},_t;function ar(){return _t||(_t=1,function(n){var o={single_source_shortest_paths:function(i,e,t){var r={},a={};a[e]=0;var l=o.PriorityQueue.make();l.push(e,0);for(var s,u,f,C,p,m,S,A,M;!l.empty();){s=l.pop(),u=s.value,C=s.cost,p=i[u]||{};for(f in p)p.hasOwnProperty(f)&&(m=p[f],S=C+m,A=a[f],M=typeof a[f]>"u",(M||A>S)&&(a[f]=S,l.push(f,S),r[f]=u))}if(typeof t<"u"&&typeof a[t]>"u"){var b=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(b)}return r},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],r=e;r;)t.push(r),i[r],r=i[r];return t.reverse(),t},find_path:function(i,e,t){var r=o.single_source_shortest_paths(i,e,t);return o.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(i){var e=o.PriorityQueue,t={},r;i=i||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=o}(Ne)),Ne.exports}var yt;function sr(){return yt||(yt=1,function(n){const o=X(),i=nr(),e=rr(),t=or(),r=ir(),a=Rt(),l=W(),s=ar();function u(b){return unescape(encodeURIComponent(b)).length}function f(b,I,B){const E=[];let q;for(;(q=b.exec(B))!==null;)E.push({data:q[0],index:q.index,mode:I,length:q[0].length});return E}function C(b){const I=f(a.NUMERIC,o.NUMERIC,b),B=f(a.ALPHANUMERIC,o.ALPHANUMERIC,b);let E,q;return l.isKanjiModeEnabled()?(E=f(a.BYTE,o.BYTE,b),q=f(a.KANJI,o.KANJI,b)):(E=f(a.BYTE_KANJI,o.BYTE,b),q=[]),I.concat(B,E,q).sort(function(c,h){return c.index-h.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function p(b,I){switch(I){case o.NUMERIC:return i.getBitsLength(b);case o.ALPHANUMERIC:return e.getBitsLength(b);case o.KANJI:return r.getBitsLength(b);case o.BYTE:return t.getBitsLength(b)}}function m(b){return b.reduce(function(I,B){const E=I.length-1>=0?I[I.length-1]:null;return E&&E.mode===B.mode?(I[I.length-1].data+=B.data,I):(I.push(B),I)},[])}function S(b){const I=[];for(let B=0;B<b.length;B++){const E=b[B];switch(E.mode){case o.NUMERIC:I.push([E,{data:E.data,mode:o.ALPHANUMERIC,length:E.length},{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.ALPHANUMERIC:I.push([E,{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.KANJI:I.push([E,{data:E.data,mode:o.BYTE,length:u(E.data)}]);break;case o.BYTE:I.push([{data:E.data,mode:o.BYTE,length:u(E.data)}])}}return I}function A(b,I){const B={},E={start:{}};let q=["start"];for(let _=0;_<b.length;_++){const c=b[_],h=[];for(let d=0;d<c.length;d++){const g=c[d],y=""+_+d;h.push(y),B[y]={node:g,lastCount:0},E[y]={};for(let v=0;v<q.length;v++){const w=q[v];B[w]&&B[w].node.mode===g.mode?(E[w][y]=p(B[w].lastCount+g.length,g.mode)-p(B[w].lastCount,g.mode),B[w].lastCount+=g.length):(B[w]&&(B[w].lastCount=g.length),E[w][y]=p(g.length,g.mode)+4+o.getCharCountIndicator(g.mode,I))}}q=h}for(let _=0;_<q.length;_++)E[q[_]].end=0;return{map:E,table:B}}function M(b,I){let B;const E=o.getBestModeForData(b);if(B=o.from(I,E),B!==o.BYTE&&B.bit<E.bit)throw new Error('"'+b+'" cannot be encoded with mode '+o.toString(B)+`.
 Suggested mode is: `+o.toString(E));switch(B===o.KANJI&&!l.isKanjiModeEnabled()&&(B=o.BYTE),B){case o.NUMERIC:return new i(b);case o.ALPHANUMERIC:return new e(b);case o.KANJI:return new r(b);case o.BYTE:return new t(b)}}n.fromArray=function(I){return I.reduce(function(B,E){return typeof E=="string"?B.push(M(E,null)):E.data&&B.push(M(E.data,E.mode)),B},[])},n.fromString=function(I,B){const E=C(I,l.isKanjiModeEnabled()),q=S(E),_=A(q,B),c=s.find_path(_.map,"start","end"),h=[];for(let d=1;d<c.length-1;d++)h.push(_.table[c[d]].node);return n.fromArray(m(h))},n.rawSplit=function(I){return n.fromArray(C(I,l.isKanjiModeEnabled()))}}(Ie)),Ie}var pt;function lr(){if(pt)return he;pt=1;const n=W(),o=ze(),i=jn(),e=Gn(),t=Jn(),r=Yn(),a=$n(),l=Pt(),s=Zn(),u=er(),f=tr(),C=X(),p=sr();function m(_,c){const h=_.size,d=r.getPositions(c);for(let g=0;g<d.length;g++){const y=d[g][0],v=d[g][1];for(let w=-1;w<=7;w++)if(!(y+w<=-1||h<=y+w))for(let T=-1;T<=7;T++)v+T<=-1||h<=v+T||(w>=0&&w<=6&&(T===0||T===6)||T>=0&&T<=6&&(w===0||w===6)||w>=2&&w<=4&&T>=2&&T<=4?_.set(y+w,v+T,!0,!0):_.set(y+w,v+T,!1,!0))}}function S(_){const c=_.size;for(let h=8;h<c-8;h++){const d=h%2===0;_.set(h,6,d,!0),_.set(6,h,d,!0)}}function A(_,c){const h=t.getPositions(c);for(let d=0;d<h.length;d++){const g=h[d][0],y=h[d][1];for(let v=-2;v<=2;v++)for(let w=-2;w<=2;w++)v===-2||v===2||w===-2||w===2||v===0&&w===0?_.set(g+v,y+w,!0,!0):_.set(g+v,y+w,!1,!0)}}function M(_,c){const h=_.size,d=u.getEncodedBits(c);let g,y,v;for(let w=0;w<18;w++)g=Math.floor(w/3),y=w%3+h-8-3,v=(d>>w&1)===1,_.set(g,y,v,!0),_.set(y,g,v,!0)}function b(_,c,h){const d=_.size,g=f.getEncodedBits(c,h);let y,v;for(y=0;y<15;y++)v=(g>>y&1)===1,y<6?_.set(y,8,v,!0):y<8?_.set(y+1,8,v,!0):_.set(d-15+y,8,v,!0),y<8?_.set(8,d-y-1,v,!0):y<9?_.set(8,15-y-1+1,v,!0):_.set(8,15-y-1,v,!0);_.set(d-8,8,1,!0)}function I(_,c){const h=_.size;let d=-1,g=h-1,y=7,v=0;for(let w=h-1;w>0;w-=2)for(w===6&&w--;;){for(let T=0;T<2;T++)if(!_.isReserved(g,w-T)){let F=!1;v<c.length&&(F=(c[v]>>>y&1)===1),_.set(g,w-T,F),y--,y===-1&&(v++,y=7)}if(g+=d,g<0||h<=g){g-=d,d=-d;break}}}function B(_,c,h){const d=new i;h.forEach(function(T){d.put(T.mode.bit,4),d.put(T.getLength(),C.getCharCountIndicator(T.mode,_)),T.write(d)});const g=n.getSymbolTotalCodewords(_),y=l.getTotalCodewordsCount(_,c),v=(g-y)*8;for(d.getLengthInBits()+4<=v&&d.put(0,4);d.getLengthInBits()%8!==0;)d.putBit(0);const w=(v-d.getLengthInBits())/8;for(let T=0;T<w;T++)d.put(T%2?17:236,8);return E(d,_,c)}function E(_,c,h){const d=n.getSymbolTotalCodewords(c),g=l.getTotalCodewordsCount(c,h),y=d-g,v=l.getBlocksCount(c,h),w=d%v,T=v-w,F=Math.floor(d/v),z=Math.floor(y/v),qt=z+1,He=F-z,Dt=new s(He);let ue=0;const ae=new Array(v),Ke=new Array(v);let ce=0;const kt=new Uint8Array(_.buffer);for(let Z=0;Z<v;Z++){const fe=Z<T?z:qt;ae[Z]=kt.slice(ue,ue+fe),Ke[Z]=Dt.encode(ae[Z]),ue+=fe,ce=Math.max(ce,fe)}const de=new Uint8Array(d);let je=0,x,Q;for(x=0;x<ce;x++)for(Q=0;Q<v;Q++)x<ae[Q].length&&(de[je++]=ae[Q][x]);for(x=0;x<He;x++)for(Q=0;Q<v;Q++)de[je++]=Ke[Q][x];return de}function q(_,c,h,d){let g;if(Array.isArray(_))g=p.fromArray(_);else if(typeof _=="string"){let F=c;if(!F){const z=p.rawSplit(_);F=u.getBestVersionForData(z,h)}g=p.fromString(_,F||40)}else throw new Error("Invalid data");const y=u.getBestVersionForData(g,h);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!c)c=y;else if(c<y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+y+`.
`);const v=B(c,h,g),w=n.getSymbolSize(c),T=new e(w);return m(T,c),S(T),A(T,c),b(T,h,0),c>=7&&M(T,c),I(T,v),isNaN(d)&&(d=a.getBestMask(T,b.bind(null,T,h))),a.applyMask(d,T),b(T,h,d),{modules:T,version:c,errorCorrectionLevel:h,maskPattern:d,segments:g}}return he.create=function(c,h){if(typeof c>"u"||c==="")throw new Error("No input text");let d=o.M,g,y;return typeof h<"u"&&(d=o.from(h.errorCorrectionLevel,o.M),g=u.from(h.version),y=a.from(h.maskPattern),h.toSJISFunc&&n.setToSJISFunction(h.toSJISFunc)),q(c,g,d,y)},he}var qe={},De={},vt;function Nt(){return vt||(vt=1,function(n){function o(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");const t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}n.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:o(e.color.dark||"#000000ff"),light:o(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},n.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale},n.getImageWidth=function(e,t){const r=n.getScale(e,t);return Math.floor((e+t.margin*2)*r)},n.qrToImageData=function(e,t,r){const a=t.modules.size,l=t.modules.data,s=n.getScale(a,r),u=Math.floor((a+r.margin*2)*s),f=r.margin*s,C=[r.color.light,r.color.dark];for(let p=0;p<u;p++)for(let m=0;m<u;m++){let S=(p*u+m)*4,A=r.color.light;if(p>=f&&m>=f&&p<u-f&&m<u-f){const M=Math.floor((p-f)/s),b=Math.floor((m-f)/s);A=C[l[M*a+b]?1:0]}e[S++]=A.r,e[S++]=A.g,e[S++]=A.b,e[S]=A.a}}}(De)),De}var Ct;function ur(){return Ct||(Ct=1,function(n){const o=Nt();function i(t,r,a){t.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=a,r.width=a,r.style.height=a+"px",r.style.width=a+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(r,a,l){let s=l,u=a;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),a||(u=e()),s=o.getOptions(s);const f=o.getImageWidth(r.modules.size,s),C=u.getContext("2d"),p=C.createImageData(f,f);return o.qrToImageData(p.data,r,s),i(C,u,f),C.putImageData(p,0,0),u},n.renderToDataURL=function(r,a,l){let s=l;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),s||(s={});const u=n.render(r,a,s),f=s.type||"image/png",C=s.rendererOpts||{};return u.toDataURL(f,C.quality)}}(qe)),qe}var ke={},bt;function cr(){if(bt)return ke;bt=1;const n=Nt();function o(t,r){const a=t.a/255,l=r+'="'+t.hex+'"';return a<1?l+" "+r+'-opacity="'+a.toFixed(2).slice(1)+'"':l}function i(t,r,a){let l=t+r;return typeof a<"u"&&(l+=" "+a),l}function e(t,r,a){let l="",s=0,u=!1,f=0;for(let C=0;C<t.length;C++){const p=Math.floor(C%r),m=Math.floor(C/r);!p&&!u&&(u=!0),t[C]?(f++,C>0&&p>0&&t[C-1]||(l+=u?i("M",p+a,.5+m+a):i("m",s,0),s=0,u=!1),p+1<r&&t[C+1]||(l+=i("h",f),f=0)):s++}return l}return ke.render=function(r,a,l){const s=n.getOptions(a),u=r.modules.size,f=r.modules.data,C=u+s.margin*2,p=s.color.light.a?"<path "+o(s.color.light,"fill")+' d="M0 0h'+C+"v"+C+'H0z"/>':"",m="<path "+o(s.color.dark,"stroke")+' d="'+e(f,u,s.margin)+'"/>',S='viewBox="0 0 '+C+" "+C+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+S+' shape-rendering="crispEdges">'+p+m+`</svg>
`;return typeof l=="function"&&l(null,M),M},ke}var Et;function dr(){if(Et)return ee;Et=1;const n=Kn(),o=lr(),i=ur(),e=cr();function t(r,a,l,s,u){const f=[].slice.call(arguments,1),C=f.length,p=typeof f[C-1]=="function";if(!p&&!n())throw new Error("Callback required as last argument");if(p){if(C<2)throw new Error("Too few arguments provided");C===2?(u=l,l=a,a=s=void 0):C===3&&(a.getContext&&typeof u>"u"?(u=s,s=void 0):(u=s,s=l,l=a,a=void 0))}else{if(C<1)throw new Error("Too few arguments provided");return C===1?(l=a,a=s=void 0):C===2&&!a.getContext&&(s=l,l=a,a=void 0),new Promise(function(m,S){try{const A=o.create(l,s);m(r(A,a,s))}catch(A){S(A)}})}try{const m=o.create(l,s);u(null,r(m,a,s))}catch(m){u(m)}}return ee.create=o.create,ee.toCanvas=t.bind(null,i.render),ee.toDataURL=t.bind(null,i.renderToDataURL),ee.toString=t.bind(null,function(r,a,l){return e.render(r,l)}),ee}var fr=dr();const gr=Zt(fr);function hr(n,o){const i=Hn(n),e=j("");return ie(i,async t=>{i.value&&On&&(e.value=await gr.toDataURL(t,o))},{immediate:!0}),e}const mr=$({__name:"PageQrCode",props:{url:{},textAbove:{},textBelow:{}},setup(n,{expose:o}){o();const i=n,e=Oe(i,"url"),t=hr(e,{errorCorrectionLevel:"L",margin:1,width:200}),r={props:i,qrUrl:e,qrcode:t};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),wr=["src"];function _r(n,o,i,e,t,r){return P(),D(xe,{class:"pb-card-qrcode no-shadow",style:{width:"200px"}},{default:R(()=>[i.textAbove?(P(),D(re,{key:0,class:"pb-qrcode-text-above q-pa-sm"},{default:R(()=>[le(G(i.textAbove),1)]),_:1})):k("",!0),N(re,{class:"pb-qrcode-code q-pa-none q-px-sm"},{default:R(()=>[K("img",{src:e.qrcode,style:{width:"100%"}},null,8,wr)]),_:1}),i.textBelow?(P(),D(re,{key:1,class:"pb-qrcode-text-below q-pa-sm"},{default:R(()=>[le(G(i.textBelow),1)]),_:1})):k("",!0)]),_:1})}const yr=Y(mr,[["render",_r],["__scopeId","data-v-202295d8"],["__file","PageQrCode.vue"]]),pr=It({name:"QCarouselSlide",props:{...Ft,imgSrc:String},setup(n,{slots:o}){const i=L(()=>n.imgSrc?{backgroundImage:`url("${n.imgSrc}")`}:{});return()=>V("div",{class:"q-carousel__slide",style:i.value},en(o.default))}}),vr=["top","right","bottom","left"],Cr=["regular","flat","outline","push","unelevated"],br=It({name:"QCarousel",props:{...tn,...Ut,...hn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:n=>Cr.includes(n),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:n=>vr.includes(n)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...mn,...Vt],setup(n,{slots:o}){const{proxy:{$q:i}}=on(),e=nn(n,i);let t=null,r;const{updatePanelsList:a,getPanelContent:l,panelDirectives:s,goToPanel:u,previousPanel:f,nextPanel:C,getEnabledPanels:p,panelIndex:m}=xt(),{inFullscreen:S}=wn(),A=L(()=>S.value!==!0&&n.height!==void 0?{height:n.height}:{}),M=L(()=>n.vertical===!0?"vertical":"horizontal"),b=L(()=>n.navigationPosition||(n.vertical===!0?"right":"bottom")),I=L(()=>`q-carousel q-panel-parent q-carousel--with${n.padding===!0?"":"out"}-padding`+(S.value===!0?" fullscreen":"")+(e.value===!0?" q-carousel--dark q-dark":"")+(n.arrows===!0?` q-carousel--arrows-${M.value}`:"")+(n.navigation===!0?` q-carousel--navigation-${b.value}`:"")),B=L(()=>{const g=[n.prevIcon||i.iconSet.carousel[n.vertical===!0?"up":"left"],n.nextIcon||i.iconSet.carousel[n.vertical===!0?"down":"right"]];return n.vertical===!1&&i.lang.rtl===!0?g.reverse():g}),E=L(()=>n.navigationIcon||i.iconSet.carousel.navigationIcon),q=L(()=>n.navigationActiveIcon||E.value),_=L(()=>({color:n.controlColor,textColor:n.controlTextColor,round:!0,[n.controlType]:!0,dense:!0}));ie(()=>n.modelValue,()=>{n.autoplay&&c()}),ie(()=>n.autoplay,g=>{g?c():t!==null&&(clearTimeout(t),t=null)});function c(){const g=St(n.autoplay)===!0?Math.abs(n.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,g>=0?C():f()},g)}Qe(()=>{n.autoplay&&c()}),Tt(()=>{t!==null&&clearTimeout(t)});function h(g,y){return V("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${g} q-carousel__navigation--${b.value}`+(n.controlColor!==void 0?` text-${n.controlColor}`:"")},[V("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},p().map(y))])}function d(){const g=[];if(n.navigation===!0){const y=o["navigation-icon"]!==void 0?o["navigation-icon"]:w=>V(O,{key:"nav"+w.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${w.active===!0?"":"in"}active`,...w.btnProps,onClick:w.onClick}),v=r-1;g.push(h("buttons",(w,T)=>{const F=w.props.name,z=m.value===T;return y({index:T,maxIndex:v,name:F,active:z,btnProps:{icon:z===!0?q.value:E.value,size:"sm",..._.value},onClick:()=>{u(F)}})}))}else if(n.thumbnails===!0){const y=n.controlColor!==void 0?` text-${n.controlColor}`:"";g.push(h("thumbnails",v=>{const w=v.props;return V("img",{key:"tmb#"+w.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${w.name===n.modelValue?"":"in"}active`+y,src:w.imgSrc||w["img-src"],onClick:()=>{u(w.name)}})}))}return n.arrows===!0&&m.value>=0&&((n.infinite===!0||m.value>0)&&g.push(V("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${M.value} absolute flex flex-center`},[V(O,{icon:B.value[0],..._.value,onClick:f})])),(n.infinite===!0||m.value<r-1)&&g.push(V("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${M.value} absolute flex flex-center`},[V(O,{icon:B.value[1],..._.value,onClick:C})]))),an(o.control,g)}return()=>(r=a(o),V("div",{class:I.value,style:A.value},[rn("div",{class:"q-carousel__slides-container"},l(),"sl-cont",n.swipeable,()=>s.value)].concat(d())))}}),Er=$({__name:"PageCarouselView",props:{slicedImages:{},mediaitemId:{}},emits:["triggerChangedItem"],setup(n,{expose:o,emit:i}){o();const e=n,t=Oe(e.mediaitemId);ie(()=>e.mediaitemId,u=>{t.value=u});const r=i;function a(){console.log("TODO: add method to close dialog programmatically")}function l(u){r("triggerChangedItem",u)}const s={props:e,currentMediaitemId:t,emit:r,handleSwipeDown:a,carouselTransition:l,MediaItemPreviewViewer:_n};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function Br(n,o,i,e,t,r){return Ue((P(),D(br,{modelValue:e.currentMediaitemId,"onUpdate:modelValue":o[0]||(o[0]=a=>e.currentMediaitemId=a),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",arrows:!0,infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:e.carouselTransition},{default:R(()=>[(P(!0),J(oe,null,Ve(e.props.slicedImages,a=>(P(),D(pr,{key:a.id,name:a.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:R(()=>[N(e.MediaItemPreviewViewer,{item:a},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[Qt,e.handleSwipeDown,void 0,{mouse:!0,down:!0}]])}const Sr=Y(Er,[["render",Br],["__file","PageCarouselView.vue"]]),Tr=$({__name:"GalleryDetailPage",props:{startTimer:Boolean},setup(n,{expose:o}){o();const i=sn(),e=ln(),t=un(),r=cn(),a=j(""),l=j(!1),s=j(!1),u=j(!1),f=n;dn(()=>{a.value=e.params.id}),ie(e,c=>{a.value=c.params.id}),Qe(()=>{s.value=f.startTimer});const C=c=>{a.value=c},p=L(()=>M(a.value)),m=L(()=>r.collection.findIndex(c=>c.id==a.value)+1),S=L(()=>t.getConfigElement("uisettings.gallery_show_filter",!1)&&b(p.value.media_type)),A=L(()=>{const c=[];return t.getConfigElement("share.actions",[]).forEach((d,g)=>{const y={config_index:g,handles_images_only:ne.get(d,"action.handles_images_only",!1),show_button:ne.get(d,"trigger.ui_trigger.show_button",!1),title:ne.get(d,"trigger.ui_trigger.title",""),icon:ne.get(d,"trigger.ui_trigger.icon","")};c.push(y)}),console.log(c),c}),M=c=>r.collection.find(h=>h.id==c),b=c=>["image","collageimage","animationimage"].includes(c),I=async c=>{await fetch(c,{cache:"reload",mode:"no-cors"});const h=new Date().getTime();document.body.querySelectorAll(`img[src*='${c}']`).forEach(d=>{d.src=c+"#"+h})},_={$q:i,route:e,configurationStore:t,mediacollectionStore:r,selectedMediaitemId:a,rightDrawerOpen:l,headercountdowntimer:s,displayIndeterminateProgressbar:u,props:f,onCarouselTransition:C,currentMediaitem:p,currentMediaitemNumber:m,showFilter:S,shareButtons:A,getMediaitemById:M,getFilterAvailable:b,reloadImg:I,doApplyFilter:(c,h)=>{u.value=!0,fetch(`/api/mediaprocessing/applyfilter/${c}/${h}`).then(d=>{if(!d.ok)throw new Error("Server returned "+d.status);const g=M(c);I(g.full),I(g.preview),I(g.thumbnail),u.value=!1}).catch(d=>{console.error(d),u.value=!1})},doDeleteItem:c=>{a.value=void 0,fetch("/api/mediacollection/delete",{method:"POST",body:JSON.stringify({image_id:c}),headers:{"Content-Type":"application/json"}}).then(h=>{if(!h.ok)throw new Error("Server returned "+h.status)}).then(h=>{console.log(h)}).catch(h=>{console.error("There was a problem with the Fetch operation:",h),i.notify({message:"Error deleting file! Please check logs and browser console.",type:"negative"})})},doShareAction:c=>{console.log(a.value,c),fn(`/api/share/actions/${a.value}/${c}`)},PageToolbar:Mn,HeaderCountdownTimer:qn,HeaderProcessing:Ln,DrawerFilter:Qn,PageQrCode:yr,PageCarouselView:Sr,ItemNotAvailableError:yn};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),Ir={key:0,class:"fixed-full"},Ar={key:1};function Pr(n,o,i,e,t,r){return P(),D(Kt,{view:"hhh Lpr ffr",onClick:o[5]||(o[5]=a=>e.headercountdowntimer=!1)},{default:R(()=>[e.currentMediaitem?(P(),J("div",Ir,[N(Lt,{class:"bg-primary text-white"},{default:R(()=>[e.headercountdowntimer?(P(),D(e.HeaderCountdownTimer,{key:0,duration:e.configurationStore.getConfigElement("uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED",0),onTriggerTimeout:o[0]||(o[0]=a=>n.$router.push({path:"/"}))},null,8,["duration"])):k("",!0),e.displayIndeterminateProgressbar?(P(),D(e.HeaderProcessing,{key:1})):k("",!0)]),_:1}),e.showFilter?(P(),D(Ot,{key:0,id:"gallery-drawer-filters",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[1]||(o[1]=a=>e.rightDrawerOpen=a),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:R(()=>[N(e.DrawerFilter,{id:e.currentMediaitem.id,"available-filter":e.configurationStore.getConfigElement("uisettings.gallery_filter_userselectable",[]),onTriggerApplyFilter:e.doApplyFilter},null,8,["id","available-filter"])]),_:1},8,["modelValue"])):k("",!0),N(Ht,{class:"q-pa-none galleryimagedetail full-height"},{default:R(()=>[N(zt,{class:"full-height"},{default:R(()=>[N(e.PageCarouselView,{"mediaitem-id":e.currentMediaitem.id,"sliced-images":e.mediacollectionStore.collection,onTriggerChangedItem:e.onCarouselTransition,onClick:o[2]||(o[2]=a=>e.rightDrawerOpen=!1)},null,8,["mediaitem-id","sliced-images"]),e.configurationStore.getConfigElement("uisettings.gallery_show_qrcode",!1)?(P(),D(Bt,{key:0,position:"top-right",class:"q-ma-lg"},{default:R(()=>[N(e.PageQrCode,{url:e.currentMediaitem.share_url,"text-above":e.configurationStore.getConfigElement("uisettings.qrcode_text_above",""),"text-below":e.configurationStore.getConfigElement("uisettings.qrcode_text_below","")},null,8,["url","text-above","text-below"])]),_:1})):k("",!0),N(e.PageToolbar,{item:e.currentMediaitem,"show-filter":e.configurationStore.getConfigElement("uisettings.gallery_show_filter",!1),"enable-filter":e.getFilterAvailable(e.currentMediaitem.media_type),"show-share":e.configurationStore.getConfigElement("share.sharing_enabled",!1),"share-direct-access-buttons":e.configurationStore.getConfigElement("share.number_direct_access_buttons",1),"share-buttons":e.shareButtons,"show-delete":e.configurationStore.getConfigElement("uisettings.gallery_show_delete",!1),"show-download":e.configurationStore.getConfigElement("uisettings.gallery_show_download",!1),image_number:e.currentMediaitemNumber,images_total:e.mediacollectionStore.collection_number_of_items,onTriggerToggleDisplayFilter:o[3]||(o[3]=a=>e.rightDrawerOpen=!e.rightDrawerOpen),onTriggerDeleteMediaitem:o[4]||(o[4]=a=>[e.doDeleteItem,n.$router.back()]),onTriggerShareAction:e.doShareAction},null,8,["item","show-filter","enable-filter","show-share","share-direct-access-buttons","share-buttons","show-delete","show-download","image_number","images_total"])]),_:1})]),_:1})])):(P(),J("div",Ar,[N(e.ItemNotAvailableError)]))]),_:1})}const zr=Y(Tr,[["render",Pr],["__file","GalleryDetailPage.vue"]]);export{zr as default};
