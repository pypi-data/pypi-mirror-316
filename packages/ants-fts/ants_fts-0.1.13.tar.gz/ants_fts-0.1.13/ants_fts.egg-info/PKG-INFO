Metadata-Version: 2.1
Name: ants-fts
Version: 0.1.13
Summary: This library is used to extract features from data.
Home-page: https://ants.abc
Author: HaoPP
Author-email: haopp@antsomi.com
Project-URL: Source, https://ants.abc/source
Project-URL: Documentation, https://ants.abc/docs
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Intended Audience :: Developers
Classifier: Natural Language :: English
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE

# ants-fts
This repository is used to extract features from Antsomi's features.

# Example

```python
import pandas as pd
from datetime import datetime, timedelta
from ants_extractor.IntervalExtractor import IntervalExtractor
from ants_extractor.SkewnessScoreExtractor import SkewnessScoreExtractor
from ants_extractor.DatetimeExtractor import DatetimeExtractor
from ants_extractor.DeductionExtractor import DeductionExtractor
from ants_extractor.PurchasingPowerExtractor import PurchasingPowerExtractor
from ants_extractor.RFMExtractor import RFMExtractor
from datetime import datetime, timedelta
import warnings 
warnings.filterwarnings('ignore')

data = {'customer_phone': {
  35452:  '640327a34',
  40030:  '640327a34',
  54858:  'be3e7573a',
  72959:  'be3e7573a',
  73009:  'be3e7573a',
  84052:  '89a90516c',
  85677:  '89a90516c',
  99817:  'be3e7573a',
  106287: 'be3e7573a',
  123339: '89a90516c',
  134011: '89a90516c',
  150009: '89a90516c',
  168649: 'be3e7573a',
  200112: '640327a34',
  228401: '640327a34',
  234409: '640327a34'},
 'date_created': {35452: pd.Timestamp('2024-11-10 10:02:19'),
  40030: pd.Timestamp('2024-11-06 12:30:11'),
  54858: pd.Timestamp('2024-10-28 20:13:48'),
  72959: pd.Timestamp('2024-09-20 19:05:52'),
  73009: pd.Timestamp('2024-09-19 21:53:27'),
  84052: pd.Timestamp('2024-09-24 18:39:17'),
  85677: pd.Timestamp('2024-09-24 18:33:07'),
  99817: pd.Timestamp('2024-08-24 20:21:43'),
  106287: pd.Timestamp('2024-09-29 20:27:43'),
  123339: pd.Timestamp('2024-05-01 14:42:02'),
  134011: pd.Timestamp('2024-06-14 17:10:20'),
  150009: pd.Timestamp('2024-05-01 13:37:05'),
  168649: pd.Timestamp('2024-03-10 20:22:56'),
  200112: pd.Timestamp('2024-04-19 18:40:13'),
  228401: pd.Timestamp('2024-02-19 19:14:53'),
  234409: pd.Timestamp('2024-04-22 12:07:14')},
 'discount_amount': {35452: 0.0,
  40030: 0.0,
  54858: 75000.0,
  72959: 100000.0,
  73009: 84000.0,
  84052: 108000.0,
  85677: 1000000.0,
  99817: 174500.0,
  106287: 187500.0,
  123339: 0.0,
  134011: 395000.0,
  150009: 150000.0,
  168649: 179000.0,
  200112: 0.0,
  228401: 100000.0,
  234409: 0.0},
 'subtotal_amount': {35452: 100000.0,
  40030: 1500000.0,
  54858: 750000.0,
  72959: 144000.0,
  73009: 840000.0,
  84052: 1870000.0,
  85677: 1785000.0,
  99817: 1745000.0,
  106287: 1875000.0,
  123339: 90000.0,
  134011: 2290000.0,
  150009: 10745000.0,
  168649: 1790000.0,
  200112: 850000.0,
  228401: 1700000.0,
  234409: 0.0},
 'revenue': {35452: 100000.0,
  40030: 1500000.0,
  54858: 675000.0,
  72959: 44000.0,
  73009: 756000.0,
  84052: 1762000.0,
  85677: 785000.0,
  99817: 1570500.0,
  106287: 1687500.0,
  123339: 90000.0,
  134011: 1895000.0,
  150009: 10595000.0,
  168649: 1611000.0,
  200112: 850000.0,
  228401: 1600000.0,
  234409: 0.0}}
df = pd.DataFrame(data)
fts_01 = IntervalExtractor.extract(df, ['customer_phone'], 'date_created')
fts_02 = SkewnessScoreExtractor.extract(df, ['customer_phone'], 'date_created');
fts_03 = DatetimeExtractor.extract(df, ['customer_phone'], 'date_created');
fts_04 = DeductionExtractor.extract(df, ['customer_phone'], 'discount_amount', 'subtotal_amount');
fts_05 = PurchasingPowerExtractor.extract(df, ['customer_phone'], "revenue");
fts_06 = RFMExtractor.extract(df, ['customer_phone'], "date_created", "revenue", "2024-12-15 00:00:00");
fts = fts_01.merge(fts_02, how="left").merge(fts_03,how='left').merge(fts_04,how='left').merge(fts_04,how='left').merge(fts_05,how='left').merge(fts_06,how='left');

fts.round(3).T.to_markdown()
|:---------------------------|:----------|:-----------|:------------|
| customer_phone             | 640327a34 | 89a90516c  | be3e7573a   |
| _cnt                       | 5         | 5          | 6           |
| _avg_itv                   | 66.154    | 36.552     | 46.399      |
| _var_itv                   | 8441.535  | 2338.825   | 4681.767    |
| _skewness_score            | 0.415     | 0.366      | -2.106      |
| _weekend_rate              | 0.2       | 0.0        | 0.5         |
| _weekday_rate              | 0.8       | 1.0        | 0.5         |
| _monday_rate               | 0.4       | 0.0        | 0.167       |
| _tuesday_rate              | 0.0       | 0.4        | 0.0         |
| _wednesday_rate            | 0.2       | 0.4        | 0.0         |
| _thurday_rate              | 0.0       | 0.0        | 0.167       |
| _friday_rate               | 0.2       | 0.2        | 0.167       |
| _saturday_rate             | 0.0       | 0.0        | 0.167       |
| _sunday_rate               | 0.2       | 0.0        | 0.333       |
| _am_rate                   | 0.2       | 0.0        | 0.0         |
| _pm_rate                   | 0.8       | 1.0        | 1.0         |
| _dawn_rate                 | 0.0       | 0.0        | 0.0         |
| _morning_rate              | 0.2       | 0.0        | 0.0         |
| _afternoon_rate            | 0.4       | 0.6        | 0.0         |
| _evening_rate              | 0.4       | 0.4        | 1.0         |
| _midnight_rate             | 0.0       | 0.0        | 0.0         |
| _avg_deduction             | 0.015     | 0.161      | 0.199       |
| _var_deduction             | 0.001     | 0.054      | 0.059       |
| _ratio_discount_camp_usage | 0.2       | 0.8        | 1.0         |
| _total_revenue             | 4050000.0 | 15127000.0 | 6344000.0   |
| _aov                       | 810000.0  | 3025400.0  | 1057333.333 |
| _median_ov                 | 850000.0  | 1762000.0  | 1163250.0   |
| _percentage_rank           | 0.333     | 1.0        | 0.667       |
| _recency                   | 34.582    | 81.223     | 47.157      |
| _frequency                 | 5         | 5          | 6           |
| _monetary                  | 4050000.0 | 15127000.0 | 6344000.0   |

```
