import{d as Mn,_ as Bn,al as H,b as at,e as Y,a$ as Gn,b0 as At,b1 as $n,ap as ot,b2 as qn,b3 as Kn,ae as kt,c as g,f as c,g as b,u as Wn,o as _,j as m,k as a,b4 as Jn,q as Ft,aW as Xn,a6 as C,b5 as Yn,z as O,aL as st,b6 as Zn,a as j,l as Qn,b7 as Ot,b8 as er,H as jt,b9 as It,ba as tr,x as Vt,bb as nr,C as Ut,bc as rr,bd as ar,be as or,bf as Et,bg as sr,bh as lr,bi as ur,bj as ir,bk as fr}from"./index-BfXinIUU.js";import{c as Ve,g as cr}from"./_commonjsHelpers-Cpj98o6Y.js";import{u as dr}from"./useCan-CSGIjVqA.js";import{u as pr}from"./usePageTitle-D3Tj0lw0.js";import{m as lt}from"./mapper-BysJJThA.js";var se={exports:{}};se.exports;var zt;function _r(){return zt||(zt=1,function(Z,I){var Ue=200,V="__lodash_hash_undefined__",L=800,Ee=16,Q=9007199254740991,ee="[object Arguments]",ze="[object Array]",le="[object AsyncFunction]",U="[object Boolean]",ue="[object Date]",De="[object Error]",v="[object Function]",ie="[object GeneratorFunction]",M="[object Map]",Ne="[object Number]",x="[object Null]",A="[object Object]",B="[object Proxy]",G="[object RegExp]",$="[object Set]",fe="[object String]",ce="[object Undefined]",Pe="[object WeakMap]",de="[object ArrayBuffer]",ft="[object DataView]",He="[object Float32Array]",Le="[object Float64Array]",Me="[object Int8Array]",pe="[object Int16Array]",_e="[object Int32Array]",Be="[object Uint8Array]",q="[object Uint8ClampedArray]",ge="[object Uint16Array]",me="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,Ge=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,s={};s[He]=s[Le]=s[Me]=s[pe]=s[_e]=s[Be]=s[q]=s[ge]=s[me]=!0,s[ee]=s[ze]=s[de]=s[U]=s[ft]=s[ue]=s[De]=s[v]=s[M]=s[Ne]=s[A]=s[G]=s[$]=s[fe]=s[Pe]=!1;var te=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,T=typeof self=="object"&&self&&self.Object===Object&&self,k=te||T||Function("return this")(),he=I&&!I.nodeType&&I,E=he&&!0&&Z&&!Z.nodeType&&Z,R=E&&E.exports===he,o=R&&te.process,ne=function(){try{var e=E&&E.require&&E.require("util").types;return e||o&&o.binding&&o.binding("util")}catch{}}(),ve=ne&&ne.isTypedArray;function $e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ye(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function qe(e){return function(t){return e(t)}}function we(e,t){return e==null?void 0:e[t]}function Ke(e,t){return function(n){return e(t(n))}}var Te=Array.prototype,Re=Function.prototype,z=Object.prototype,W=k["__core-js_shared__"],F=Re.toString,y=z.hasOwnProperty,Se=function(){var e=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ce=z.toString,l=F.call(Object),xe=RegExp("^"+F.call(y).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ae=R?k.Buffer:void 0,ct=k.Symbol,dt=k.Uint8Array;Ae&&Ae.allocUnsafe;var pt=Ke(Object.getPrototypeOf,Object),_t=Object.create,Dt=z.propertyIsEnumerable,Nt=Te.splice,D=ct?ct.toStringTag:void 0,ke=function(){try{var e=Xe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Pt=Ae?Ae.isBuffer:void 0,gt=Math.max,Ht=Date.now,mt=Xe(k,"Map"),re=Xe(Object,"create"),Lt=function(){function e(){}return function(t){if(!P(t))return{};if(_t)return _t(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function N(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mt(){this.__data__=re?re(null):{},this.size=0}function Bt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Gt(e){var t=this.__data__;if(re){var n=t[e];return n===V?void 0:n}return y.call(t,e)?t[e]:void 0}function $t(e){var t=this.__data__;return re?t[e]!==void 0:y.call(t,e)}function qt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=re&&t===void 0?V:t,this}N.prototype.clear=Mt,N.prototype.delete=Bt,N.prototype.get=Gt,N.prototype.has=$t,N.prototype.set=qt;function S(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kt(){this.__data__=[],this.size=0}function Wt(e){var t=this.__data__,n=Fe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nt.call(t,n,1),--this.size,!0}function Jt(e){var t=this.__data__,n=Fe(t,e);return n<0?void 0:t[n][1]}function Xt(e){return Fe(this.__data__,e)>-1}function Yt(e,t){var n=this.__data__,r=Fe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}S.prototype.clear=Kt,S.prototype.delete=Wt,S.prototype.get=Jt,S.prototype.has=Xt,S.prototype.set=Yt;function J(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zt(){this.size=0,this.__data__={hash:new N,map:new(mt||S),string:new N}}function Qt(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t}function en(e){return je(this,e).get(e)}function tn(e){return je(this,e).has(e)}function nn(e,t){var n=je(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}J.prototype.clear=Zt,J.prototype.delete=Qt,J.prototype.get=en,J.prototype.has=tn,J.prototype.set=nn;function X(e){var t=this.__data__=new S(e);this.size=t.size}function rn(){this.__data__=new S,this.size=0}function an(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function on(e){return this.__data__.get(e)}function sn(e){return this.__data__.has(e)}function ln(e,t){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!mt||r.length<Ue-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(e,t),this.size=n.size,this}X.prototype.clear=rn,X.prototype.delete=an,X.prototype.get=on,X.prototype.has=sn,X.prototype.set=ln;function un(e,t){var n=Qe(e),r=!n&&Ze(e),u=!n&&!r&&wt(e),f=!n&&!r&&!u&&Rt(e),d=n||r||u||f,i=d?ye(e.length,String):[],p=i.length;for(var w in e)d&&(w=="length"||u&&(w=="offset"||w=="parent")||f&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||vt(w,p))||i.push(w);return i}function We(e,t,n){(n!==void 0&&!Ie(e[t],n)||n===void 0&&!(t in e))&&Je(e,t,n)}function fn(e,t,n){var r=e[t];(!(y.call(e,t)&&Ie(r,n))||n===void 0&&!(t in e))&&Je(e,t,n)}function Fe(e,t){for(var n=e.length;n--;)if(Ie(e[n][0],t))return n;return-1}function Je(e,t,n){t=="__proto__"&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var cn=Sn();function Oe(e){return e==null?e===void 0?ce:x:D&&D in Object(e)?Cn(e):jn(e)}function bt(e){return ae(e)&&Oe(e)==ee}function dn(e){if(!P(e)||Fn(e))return!1;var t=tt(e)?xe:Ge;return t.test(En(e))}function pn(e){return ae(e)&&Tt(e.length)&&!!s[Oe(e)]}function _n(e){if(!P(e))return On(e);var t=yt(e),n=[];for(var r in e)r=="constructor"&&(t||!y.call(e,r))||n.push(r);return n}function ht(e,t,n,r,u){e!==t&&cn(t,function(f,d){if(u||(u=new X),P(f))gn(e,t,d,n,ht,r,u);else{var i=r?r(Ye(e,d),f,d+"",e,t,u):void 0;i===void 0&&(i=f),We(e,d,i)}},St)}function gn(e,t,n,r,u,f,d){var i=Ye(e,n),p=Ye(t,n),w=d.get(p);if(w){We(e,n,w);return}var h=f?f(i,p,n+"",e,t,d):void 0,oe=h===void 0;if(oe){var nt=Qe(p),rt=!nt&&wt(p),xt=!nt&&!rt&&Rt(p);h=p,nt||rt||xt?Qe(i)?h=i:zn(i)?h=wn(i):rt?(oe=!1,h=hn(p)):xt?(oe=!1,h=yn(p)):h=[]:Dn(p)||Ze(p)?(h=i,Ze(i)?h=Nn(i):(!P(i)||tt(i))&&(h=xn(p))):oe=!1}oe&&(d.set(p,h),u(h,p,r,f,d),d.delete(p)),We(e,n,h)}function mn(e,t){return Vn(In(e,t,Ct),e+"")}var bn=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:Hn(t),writable:!0})}:Ct;function hn(e,t){return e.slice()}function vn(e){var t=new e.constructor(e.byteLength);return new dt(t).set(new dt(e)),t}function yn(e,t){var n=vn(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function wn(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Tn(e,t,n,r){var u=!n;n||(n={});for(var f=-1,d=t.length;++f<d;){var i=t[f],p=void 0;p===void 0&&(p=e[i]),u?Je(n,i,p):fn(n,i,p)}return n}function Rn(e){return mn(function(t,n){var r=-1,u=n.length,f=u>1?n[u-1]:void 0,d=u>2?n[2]:void 0;for(f=e.length>3&&typeof f=="function"?(u--,f):void 0,d&&An(n[0],n[1],d)&&(f=u<3?void 0:f,u=1),t=Object(t);++r<u;){var i=n[r];i&&e(t,i,r,f)}return t})}function Sn(e){return function(t,n,r){for(var u=-1,f=Object(t),d=r(t),i=d.length;i--;){var p=d[++u];if(n(f[p],p,f)===!1)break}return t}}function je(e,t){var n=e.__data__;return kn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Xe(e,t){var n=we(e,t);return dn(n)?n:void 0}function Cn(e){var t=y.call(e,D),n=e[D];try{e[D]=void 0;var r=!0}catch{}var u=Ce.call(e);return r&&(t?e[D]=n:delete e[D]),u}function xn(e){return typeof e.constructor=="function"&&!yt(e)?Lt(pt(e)):{}}function vt(e,t){var n=typeof e;return t=t??Q,!!t&&(n=="number"||n!="symbol"&&be.test(e))&&e>-1&&e%1==0&&e<t}function An(e,t,n){if(!P(n))return!1;var r=typeof t;return(r=="number"?et(n)&&vt(t,n.length):r=="string"&&t in n)?Ie(n[t],e):!1}function kn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Fn(e){return!!Se&&Se in e}function yt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||z;return e===n}function On(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}function jn(e){return Ce.call(e)}function In(e,t,n){return t=gt(t===void 0?e.length-1:t,0),function(){for(var r=arguments,u=-1,f=gt(r.length-t,0),d=Array(f);++u<f;)d[u]=r[t+u];u=-1;for(var i=Array(t+1);++u<t;)i[u]=r[u];return i[t]=n(d),$e(e,this,i)}}function Ye(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Vn=Un(bn);function Un(e){var t=0,n=0;return function(){var r=Ht(),u=Ee-(r-n);if(n=r,u>0){if(++t>=L)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function En(e){if(e!=null){try{return F.call(e)}catch{}try{return e+""}catch{}}return""}function Ie(e,t){return e===t||e!==e&&t!==t}var Ze=bt(function(){return arguments}())?bt:function(e){return ae(e)&&y.call(e,"callee")&&!Dt.call(e,"callee")},Qe=Array.isArray;function et(e){return e!=null&&Tt(e.length)&&!tt(e)}function zn(e){return ae(e)&&et(e)}var wt=Pt||Ln;function tt(e){if(!P(e))return!1;var t=Oe(e);return t==v||t==ie||t==le||t==B}function Tt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Q}function P(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ae(e){return e!=null&&typeof e=="object"}function Dn(e){if(!ae(e)||Oe(e)!=A)return!1;var t=pt(e);if(t===null)return!0;var n=y.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&F.call(n)==l}var Rt=ve?qe(ve):pn;function Nn(e){return Tn(e,St(e))}function St(e){return et(e)?un(e):_n(e)}var Pn=Rn(function(e,t,n){ht(e,t,n)});function Hn(e){return function(){return e}}function Ct(e){return e}function Ln(){return!1}Z.exports=Pn}(se,se.exports)),se.exports}var gr=_r();const ut=cr(gr),mr={class:"runs__subflows-toggle"},it=3e4,Tr=Mn({__name:"Runs",setup(Z){const I=Bn(),Ue=Wn(),V=dr(),L=H("tab","flow-runs"),Ee=["flow-runs","task-runs"],Q=at(I.flowRuns.getFlowRunsCount),ee=at(I.taskRuns.getTaskRunsCount),ze=Y(()=>Q.executed&&ee.executed),le=Y(()=>Q.response===0&&ee.response===0),{filter:U,setFilter:ue,isCustom:De}=Gn(),v=H("flow-run-search",Et,null),ie=At(v,1200),M=H("task-run-search",Et,null),Ne=At(M,1200),x=H("hide-subflows",sr,!1),A=H("flow-runs-sort",lr,"START_TIME_DESC"),B=H("task-runs-sort",ur,"EXPECTED_START_TIME_DESC"),G=H("flow-runs-page",ir,1),{value:$}=$n("workspace-runs-list-limit",10),fe=()=>{const R=lt.map("SavedSearchFilter",U,"FlowRunsFilter");return ut({},R,{flowRuns:{nameLike:ie.value??void 0,parentTaskRunIdNull:x.value?!0:void 0},sort:A.value,limit:$.value,page:G.value})},ce=ot(fe),Pe=ot(()=>{const R=lt.map("SavedSearchFilter",U,"TaskRunsFilter");return ut({},R,{taskRuns:{nameLike:Ne.value},sort:B.value})}),de=Y(()=>De.value||x.value||v.value),He=ot(()=>{const R=lt.map("SavedSearchFilter",U,"FlowRunsFilter");return ut({},R,{flowRuns:{nameLike:ie.value??void 0,parentTaskRunIdNull:x.value?!0:void 0},sort:A.value})}),Le=at(I.ui.getFlowRunHistory,[He],{interval:it}),Me=Y(()=>Le.response??[]),{flowRuns:pe,count:_e,pages:Be,subscription:q}=qn(fe,{interval:it}),{taskRuns:ge,total:me,subscriptions:K,next:Ge}=Kn(Pe,{mode:"infinite",interval:it}),be=Y(()=>V.delete.flow_run),s=kt([]),te=Y(()=>V.delete.task_run),T=kt([]);function k(){Ue.push(fr.runs({tab:L.value}))}pr("Runs");const he=()=>{s.value=[],q.refresh()},E=()=>{T.value=[],K.refresh()};return(R,o)=>{const ne=b("p-tabs-trigger"),ve=b("p-tabs-list"),$e=b("p-card"),ye=b("p-select-all-checkbox"),qe=b("p-toggle"),we=b("p-list-header"),Ke=b("p-pager"),Te=b("p-loading-icon"),Re=b("p-message"),z=b("p-button"),W=b("p-empty-results"),F=b("p-content"),y=b("p-tabs-content"),Se=b("p-tabs-root"),Ce=b("p-layout-default");return _(),g(Ce,{class:"runs"},{header:c(()=>[m(a(Jn),{filter:a(U),"hide-actions":le.value,"onUpdate:filter":a(ue)},null,8,["filter","hide-actions","onUpdate:filter"])]),default:c(()=>[ze.value?(_(),Ft(Vt,{key:0},[le.value?(_(),g(a(Xn),{key:0})):(_(),g(F,{key:1},{default:c(()=>[m(a(Yn),{nameSearch:a(v),"onUpdate:nameSearch":o[0]||(o[0]=l=>C(v)?v.value=l:null),filter:a(U),"onUpdate:filter":a(ue)},null,8,["nameSearch","filter","onUpdate:filter"]),m(Se,{modelValue:a(L),"onUpdate:modelValue":o[12]||(o[12]=l=>C(L)?L.value=l:null),"default-value":Ee[0]},{default:c(()=>[m(ve,null,{default:c(()=>[m(ne,{value:"flow-runs"},{default:c(()=>o[13]||(o[13]=[O(" Flow runs ")])),_:1}),m(ne,{value:"task-runs"},{default:c(()=>o[14]||(o[14]=[O(" Task runs ")])),_:1})]),_:1}),m(y,{value:"flow-runs"},{default:c(()=>[m(F,null,{default:c(()=>[a(st).md?(_(),g($e,{key:0},{default:c(()=>{var l,xe;return[m(a(Zn),{history:Me.value,"start-date":(l=ce.value.flowRuns)==null?void 0:l.expectedStartTimeAfter,"end-date":(xe=ce.value.flowRuns)==null?void 0:xe.expectedStartTimeBefore,class:"runs__scatter-plot"},null,8,["history","start-date","end-date"])]}),_:1})):j("",!0),m(we,{class:"min-h-10",sticky:""},{controls:c(()=>[Qn("div",mr,[m(qe,{modelValue:a(x),"onUpdate:modelValue":o[2]||(o[2]=l=>C(x)?x.value=l:null),append:"Hide subflows"},null,8,["modelValue"])]),a(st).md?(_(),g(a(Ot),{key:0,modelValue:a(v),"onUpdate:modelValue":o[3]||(o[3]=l=>C(v)?v.value=l:null),size:"small",placeholder:"Search by flow run name",class:"min-w-64",label:"Search by flow run name"},null,8,["modelValue"])):j("",!0)]),sort:c(()=>[m(a(er),{modelValue:a(A),"onUpdate:modelValue":o[4]||(o[4]=l=>C(A)?A.value=l:null),small:""},null,8,["modelValue"])]),default:c(()=>[be.value?(_(),g(ye,{key:0,modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value=l),selectable:a(pe).map(l=>l.id),"item-name":"flow run"},null,8,["modelValue","selectable"])):j("",!0),s.value.length==0?(_(),g(a(jt),{key:1,count:a(_e),label:"run"},null,8,["count"])):(_(),g(a(It),{key:2,count:s.value.length},null,8,["count"])),a(V).delete.flow_run?(_(),g(a(tr),{key:3,selected:s.value,onDelete:he},null,8,["selected"])):j("",!0)]),_:1}),a(_e)>0?(_(),Ft(Vt,{key:1},[m(a(nr),{selected:s.value,"onUpdate:selected":o[5]||(o[5]=l=>s.value=l),selectable:be.value,"flow-runs":a(pe)},null,8,["selected","selectable","flow-runs"]),m(Ke,{limit:a($),"onUpdate:limit":o[6]||(o[6]=l=>C($)?$.value=l:null),page:a(G),"onUpdate:page":o[7]||(o[7]=l=>C(G)?G.value=l:null),pages:a(Be)},null,8,["limit","page","pages"])],64)):!a(q).executed&&a(q).loading?(_(),g(Te,{key:2,class:"m-auto"})):a(q).executed?(_(),g(W,{key:4},Ut({message:c(()=>[o[16]||(o[16]=O(" No flow runs "))]),_:2},[de.value?{name:"actions",fn:c(()=>[m(z,{size:"sm",onClick:k},{default:c(()=>o[17]||(o[17]=[O(" Clear Filters ")])),_:1})]),key:"0"}:void 0]),1024)):(_(),g(Re,{key:3,type:"error"},{default:c(()=>o[15]||(o[15]=[O(" An error occurred while loading flow runs. Please try again. ")])),_:1}))]),_:1})]),_:1}),m(y,{value:"task-runs"},{default:c(()=>[m(F,null,{default:c(()=>[m(we,{class:"min-h-10",sticky:""},{controls:c(()=>[a(st).md?(_(),g(a(Ot),{key:0,modelValue:a(M),"onUpdate:modelValue":o[9]||(o[9]=l=>C(M)?M.value=l:null),size:"small",placeholder:"Search by task run name",class:"min-w-64",label:"Search by task run name"},null,8,["modelValue"])):j("",!0)]),sort:c(()=>[m(a(rr),{modelValue:a(B),"onUpdate:modelValue":o[10]||(o[10]=l=>C(B)?B.value=l:null),small:""},null,8,["modelValue"])]),default:c(()=>[te.value?(_(),g(ye,{key:0,modelValue:T.value,"onUpdate:modelValue":o[8]||(o[8]=l=>T.value=l),selectable:a(ge).map(l=>l.id),"item-name":"task run"},null,8,["modelValue","selectable"])):j("",!0),T.value.length==0?(_(),g(a(jt),{key:1,count:a(me),label:"run"},null,8,["count"])):(_(),g(a(It),{key:2,count:T.value.length},null,8,["count"])),a(V).delete.task_run?(_(),g(a(ar),{key:3,selected:T.value,onDelete:E},null,8,["selected"])):j("",!0)]),_:1}),a(me)>0?(_(),g(a(or),{key:0,selected:T.value,"onUpdate:selected":o[11]||(o[11]=l=>T.value=l),selectable:te.value,"task-runs":a(ge),onBottom:a(Ge)},null,8,["selected","selectable","task-runs","onBottom"])):!a(K).executed&&a(K).loading?(_(),g(Te,{key:1,class:"m-auto"})):a(K).executed?(_(),g(W,{key:3},Ut({message:c(()=>[o[19]||(o[19]=O(" No task runs "))]),_:2},[de.value?{name:"actions",fn:c(()=>[m(z,{size:"sm",onClick:k},{default:c(()=>o[20]||(o[20]=[O(" Clear Filters ")])),_:1})]),key:"0"}:void 0]),1024)):(_(),g(Re,{key:2,type:"error"},{default:c(()=>o[18]||(o[18]=[O(" An error occurred while loading task runs. Please try again. ")])),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue","default-value"])]),_:1}))],64)):j("",!0)]),_:1})}}});export{Tr as default};
//# sourceMappingURL=Runs-DfSDaaYM.js.map
