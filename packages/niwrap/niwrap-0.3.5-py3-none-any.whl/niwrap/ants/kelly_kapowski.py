# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *
import dataclasses

KELLY_KAPOWSKI_METADATA = Metadata(
    id="8cf867e1228b8566e73919051e43b36f34a80495.boutiques",
    name="KellyKapowski",
    package="ants",
    container_image_tag="antsx/ants:v2.5.3",
)


class KellyKapowskiOutputs(typing.NamedTuple):
    """
    Output object returned when calling `kelly_kapowski(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    thickness_map: OutputPathType
    """The output is the thickness map defined in the segmented gray matter."""


def kelly_kapowski(
    output: str,
    image_dimensionality: typing.Literal[2, 3] | None = None,
    segmentation_image: InputPathType | None = None,
    gray_matter_probability_image: InputPathType | None = None,
    white_matter_probability_image: InputPathType | None = None,
    convergence: str | None = None,
    thickness_prior_estimate: float | None = None,
    thickness_prior_image: InputPathType | None = None,
    gradient_step: float | None = None,
    smoothing_variance: float | None = None,
    smoothing_velocity_field_parameter: str | None = None,
    use_bspline_smoothing: typing.Literal[0, 1] | None = None,
    use_masked_smoothing: typing.Literal[0, 1] | None = None,
    time_points: str | None = None,
    restrict_deformation: typing.Literal[0, 1] | None = None,
    number_of_integration_points: int | None = None,
    maximum_number_of_invert_displacement_field_iterations: int | None = None,
    verbose: typing.Literal[0, 1] | None = None,
    runner: Runner | None = None,
) -> KellyKapowskiOutputs:
    """
    DiReCT is a registration based estimate of cortical thickness. It was published
    in S. R. Das, B. B. Avants, M. Grossman, and J. C. Gee, Registration based
    cortical thickness measurement, Neuroimage 2009, 45:867--879.
    
    Author: ANTs Developers
    
    URL: https://github.com/ANTsX/ANTs
    
    Args:
        output: The output consists of a thickness map defined in the segmented\
            gray matter.
        image_dimensionality: This option forces the image to be treated as a\
            specified-dimensional image. If not specified, DiReCT tries to infer\
            the dimensionality from the input image.
        segmentation_image: A segmentation image must be supplied labeling the\
            gray and white matters. Default values = 2 and 3, respectively.
        gray_matter_probability_image: In addition to the segmentation image, a\
            gray matter probability image can be used. If no such image is\
            supplied, one is created using the segmentation image and a variance of\
            1.0 mm.
        white_matter_probability_image: In addition to the segmentation image,\
            a white matter probability image can be used. If no such image is\
            supplied, one is created using the segmentation image and a variance of\
            1.0 mm.
        convergence: Convergence is determined by fitting a line to the\
            normalized energy profile of the last N iterations (where N is\
            specified by the window size) and determining the slope which is then\
            compared with the convergence threshold.
        thickness_prior_estimate: Provides a prior constraint on the final\
            thickness measurement. Default = 10 mm.
        thickness_prior_image: An image containing spatially varying prior\
            thickness values.
        gradient_step: Gradient step size for the optimization. Default =\
            0.025.
        smoothing_variance: Defines the Gaussian smoothing of the hit and total\
            images. Default = 1.0 mm.
        smoothing_velocity_field_parameter: Defines the Gaussian smoothing of\
            the velocity field (default = 1.5 voxels). If the b-spline smoothing\
            option is chosen, then this defines the isotropic mesh spacing for the\
            smoothing spline (default = 15 mm).
        use_bspline_smoothing: Sets the option for B-spline smoothing of the\
            velocity field. Default = false.
        use_masked_smoothing: Sets the option for masked-based smoothing of the\
            velocity field. Default = false.
        time_points: Time points for irregularly spaced time samples and\
            time-variance with which to compute distance metric.
        restrict_deformation: Restrict the last dimension's deformation. Meant\
            for use with multiple time points. Default = false.
        number_of_integration_points: Number of compositions of the\
            diffeomorphism per iteration. Default = 10.
        maximum_number_of_invert_displacement_field_iterations: Maximum number\
            of iterations for estimating the invert displacement field. Default =\
            20.
        verbose: Verbose output.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `KellyKapowskiOutputs`).
    """
    runner = runner or get_global_runner()
    execution = runner.start_execution(KELLY_KAPOWSKI_METADATA)
    cargs = []
    cargs.append("KellyKapowski")
    if image_dimensionality is not None:
        cargs.extend([
            "--image-dimensionality",
            str(image_dimensionality)
        ])
    if segmentation_image is not None:
        cargs.extend([
            "--segmentation-image",
            execution.input_file(segmentation_image)
        ])
    if gray_matter_probability_image is not None:
        cargs.extend([
            "--gray-matter-probability-image",
            execution.input_file(gray_matter_probability_image)
        ])
    if white_matter_probability_image is not None:
        cargs.extend([
            "--white-matter-probability-image",
            execution.input_file(white_matter_probability_image)
        ])
    if convergence is not None:
        cargs.extend([
            "--convergence",
            convergence
        ])
    if thickness_prior_estimate is not None:
        cargs.extend([
            "--thickness-prior-estimate",
            str(thickness_prior_estimate)
        ])
    if thickness_prior_image is not None:
        cargs.extend([
            "--thickness-prior-image",
            execution.input_file(thickness_prior_image)
        ])
    if gradient_step is not None:
        cargs.extend([
            "--gradient-step",
            str(gradient_step)
        ])
    if smoothing_variance is not None:
        cargs.extend([
            "--smoothing-variance",
            str(smoothing_variance)
        ])
    if smoothing_velocity_field_parameter is not None:
        cargs.extend([
            "--smoothing-velocity-field-parameter",
            smoothing_velocity_field_parameter
        ])
    if use_bspline_smoothing is not None:
        cargs.extend([
            "--use-bspline-smoothing",
            str(use_bspline_smoothing)
        ])
    if use_masked_smoothing is not None:
        cargs.extend([
            "--use-masked-smoothing",
            str(use_masked_smoothing)
        ])
    if time_points is not None:
        cargs.extend([
            "--time-points",
            time_points
        ])
    if restrict_deformation is not None:
        cargs.extend([
            "--restrict-deformation",
            str(restrict_deformation)
        ])
    if number_of_integration_points is not None:
        cargs.extend([
            "--number-of-integration-points",
            str(number_of_integration_points)
        ])
    if maximum_number_of_invert_displacement_field_iterations is not None:
        cargs.extend([
            "--maximum-number-of-invert-displacement-field-iterations",
            str(maximum_number_of_invert_displacement_field_iterations)
        ])
    cargs.extend([
        "--output",
        output
    ])
    if verbose is not None:
        cargs.extend([
            "--verbose",
            str(verbose)
        ])
    ret = KellyKapowskiOutputs(
        root=execution.output_file("."),
        thickness_map=execution.output_file(output),
    )
    execution.run(cargs)
    return ret


__all__ = [
    "KELLY_KAPOWSKI_METADATA",
    "KellyKapowskiOutputs",
    "kelly_kapowski",
]
