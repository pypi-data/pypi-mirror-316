/* File: prms_channel_fmodule.c
 * This file is auto-generated with f2py (version:1.25.1).
 * f2py is a Fortran to Python Interface Generator (FPIG), Second Edition,
 * written by Pearu Peterson <pearu@cens.ioc.ee>.
 * Generation date: Thu Jul 20 22:02:29 2023
 * Do not edit this file directly unless you know what you are doing!!!
 */

#ifdef __cplusplus
extern "C" {
#endif

#ifndef PY_SSIZE_T_CLEAN
#define PY_SSIZE_T_CLEAN
#endif /* PY_SSIZE_T_CLEAN */

/* Unconditionally included */
#include <Python.h>
#include <numpy/npy_os.h>

/*********************** See f2py2e/cfuncs.py: includes ***********************/
#include "fortranobject.h"
#include <math.h>

/**************** See f2py2e/rules.py: mod_rules['modulebody'] ****************/
static PyObject *prms_channel_f_error;
static PyObject *prms_channel_f_module;

/*********************** See f2py2e/cfuncs.py: typedefs ***********************/
#if defined(NPY_OS_WIN32)
typedef __int64 long_long;
#else
typedef long long long_long;
typedef unsigned long long unsigned_long_long;
#endif


/****************** See f2py2e/cfuncs.py: typedefs_generated ******************/
/*need_typedefs_generated*/

/********************** See f2py2e/cfuncs.py: cppmacros **********************/
#if defined(PREPEND_FORTRAN)
#if defined(NO_APPEND_FORTRAN)
#if defined(UPPERCASE_FORTRAN)
#define F_FUNC(f,F) _##F
#else
#define F_FUNC(f,F) _##f
#endif
#else
#if defined(UPPERCASE_FORTRAN)
#define F_FUNC(f,F) _##F##_
#else
#define F_FUNC(f,F) _##f##_
#endif
#endif
#else
#if defined(NO_APPEND_FORTRAN)
#if defined(UPPERCASE_FORTRAN)
#define F_FUNC(f,F) F
#else
#define F_FUNC(f,F) f
#endif
#else
#if defined(UPPERCASE_FORTRAN)
#define F_FUNC(f,F) F##_
#else
#define F_FUNC(f,F) f##_
#endif
#endif
#endif
#if defined(UNDERSCORE_G77)
#define F_FUNC_US(f,F) F_FUNC(f##_,F##_)
#else
#define F_FUNC_US(f,F) F_FUNC(f,F)
#endif

/* See fortranobject.h for definitions. The macros here are provided for BC. */
#define rank f2py_rank
#define shape f2py_shape
#define fshape f2py_shape
#define len f2py_len
#define flen f2py_flen
#define slen f2py_slen
#define size f2py_size

#define CHECKSCALAR(check,tcheck,name,show,var)\
    if (!(check)) {\
        char errstring[256];\
        sprintf(errstring, "%s: "show, "("tcheck") failed for "name, var);\
        PyErr_SetString(prms_channel_f_error,errstring);\
        /*goto capi_fail;*/\
    } else 
#ifdef DEBUGCFUNCS
#define CFUNCSMESS(mess) fprintf(stderr,"debug-capi:"mess);
#define CFUNCSMESSPY(mess,obj) CFUNCSMESS(mess) \
    PyObject_Print((PyObject *)obj,stderr,Py_PRINT_RAW);\
    fprintf(stderr,"\n");
#else
#define CFUNCSMESS(mess)
#define CFUNCSMESSPY(mess,obj)
#endif

#ifndef max
#define max(a,b) ((a > b) ? (a) : (b))
#endif
#ifndef min
#define min(a,b) ((a < b) ? (a) : (b))
#endif
#ifndef MAX
#define MAX(a,b) ((a > b) ? (a) : (b))
#endif
#ifndef MIN
#define MIN(a,b) ((a < b) ? (a) : (b))
#endif


/************************ See f2py2e/cfuncs.py: cfuncs ************************/
static int
int_from_pyobj(int* v, PyObject *obj, const char *errmess)
{
    PyObject* tmp = NULL;

    if (PyLong_Check(obj)) {
        *v = Npy__PyLong_AsInt(obj);
        return !(*v == -1 && PyErr_Occurred());
    }

    tmp = PyNumber_Long(obj);
    if (tmp) {
        *v = Npy__PyLong_AsInt(tmp);
        Py_DECREF(tmp);
        return !(*v == -1 && PyErr_Occurred());
    }

    if (PyComplex_Check(obj)) {
        PyErr_Clear();
        tmp = PyObject_GetAttrString(obj,"real");
    }
    else if (PyBytes_Check(obj) || PyUnicode_Check(obj)) {
        /*pass*/;
    }
    else if (PySequence_Check(obj)) {
        PyErr_Clear();
        tmp = PySequence_GetItem(obj, 0);
    }

    if (tmp) {
        if (int_from_pyobj(v, tmp, errmess)) {
            Py_DECREF(tmp);
            return 1;
        }
        Py_DECREF(tmp);
    }

    {
        PyObject* err = PyErr_Occurred();
        if (err == NULL) {
            err = prms_channel_f_error;
        }
        PyErr_SetString(err, errmess);
    }
    return 0;
}


/********************* See f2py2e/cfuncs.py: userincludes *********************/
/*need_userincludes*/

/********************* See f2py2e/capi_rules.py: usercode *********************/


/* See f2py2e/rules.py */
extern void F_FUNC_US(calc_muskingum_mann,CALC_MUSKINGUM_MANN)(int*,long_long*,long_long*,double*,double*,double*,long_long*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*);
/*eof externroutines*/

/******************** See f2py2e/capi_rules.py: usercode1 ********************/


/******************* See f2py2e/cb_rules.py: buildcallback *******************/
/*need_callbacks*/

/*********************** See f2py2e/rules.py: buildapi ***********************/

/**************************** calc_muskingum_mann ****************************/
static char doc_f2py_rout_prms_channel_f_calc_muskingum_mann[] = "\
seg_upstream_inflow,seg_inflow0,seg_inflow,seg_outflow,inflow_ts,outflow_ts,seg_current_sum = calc_muskingum_mann(segment_order,to_segment,seg_lateral_inflow,seg_inflow0_in,outflow_ts_in,tsi,ts,c0,c1,c2,[nseg])\n\nWrapper for ``calc_muskingum_mann``.\
\n\nParameters\n----------\n"
"segment_order : input rank-1 array('q') with bounds (nseg)\n"
"to_segment : input rank-1 array('q') with bounds (nseg)\n"
"seg_lateral_inflow : input rank-1 array('d') with bounds (nseg)\n"
"seg_inflow0_in : input rank-1 array('d') with bounds (nseg)\n"
"outflow_ts_in : input rank-1 array('d') with bounds (nseg)\n"
"tsi : input rank-1 array('q') with bounds (nseg)\n"
"ts : input rank-1 array('d') with bounds (nseg)\n"
"c0 : input rank-1 array('d') with bounds (nseg)\n"
"c1 : input rank-1 array('d') with bounds (nseg)\n"
"c2 : input rank-1 array('d') with bounds (nseg)\n"
"\nOther Parameters\n----------------\n"
"nseg : input int, optional\n    Default: shape(segment_order, 0)\n"
"\nReturns\n-------\n"
"seg_upstream_inflow : rank-1 array('d') with bounds (nseg)\n"
"seg_inflow0 : rank-1 array('d') with bounds (nseg)\n"
"seg_inflow : rank-1 array('d') with bounds (nseg)\n"
"seg_outflow : rank-1 array('d') with bounds (nseg)\n"
"inflow_ts : rank-1 array('d') with bounds (nseg)\n"
"outflow_ts : rank-1 array('d') with bounds (nseg)\n"
"seg_current_sum : rank-1 array('d') with bounds (nseg)";
/* extern void F_FUNC_US(calc_muskingum_mann,CALC_MUSKINGUM_MANN)(int*,long_long*,long_long*,double*,double*,double*,long_long*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*); */
static PyObject *f2py_rout_prms_channel_f_calc_muskingum_mann(const PyObject *capi_self,
                           PyObject *capi_args,
                           PyObject *capi_keywds,
                           void (*f2py_func)(int*,long_long*,long_long*,double*,double*,double*,long_long*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*,double*)) {
    PyObject * volatile capi_buildvalue = NULL;
    volatile int f2py_success = 1;
/*decl*/

    int nseg = 0;
    PyObject *nseg_capi = Py_None;
    long_long *segment_order = NULL;
    npy_intp segment_order_Dims[1] = {-1};
    const int segment_order_Rank = 1;
    PyArrayObject *capi_segment_order_as_array = NULL;
    int capi_segment_order_intent = 0;
    PyObject *segment_order_capi = Py_None;
    long_long *to_segment = NULL;
    npy_intp to_segment_Dims[1] = {-1};
    const int to_segment_Rank = 1;
    PyArrayObject *capi_to_segment_as_array = NULL;
    int capi_to_segment_intent = 0;
    PyObject *to_segment_capi = Py_None;
    double *seg_lateral_inflow = NULL;
    npy_intp seg_lateral_inflow_Dims[1] = {-1};
    const int seg_lateral_inflow_Rank = 1;
    PyArrayObject *capi_seg_lateral_inflow_as_array = NULL;
    int capi_seg_lateral_inflow_intent = 0;
    PyObject *seg_lateral_inflow_capi = Py_None;
    double *seg_inflow0_in = NULL;
    npy_intp seg_inflow0_in_Dims[1] = {-1};
    const int seg_inflow0_in_Rank = 1;
    PyArrayObject *capi_seg_inflow0_in_as_array = NULL;
    int capi_seg_inflow0_in_intent = 0;
    PyObject *seg_inflow0_in_capi = Py_None;
    double *outflow_ts_in = NULL;
    npy_intp outflow_ts_in_Dims[1] = {-1};
    const int outflow_ts_in_Rank = 1;
    PyArrayObject *capi_outflow_ts_in_as_array = NULL;
    int capi_outflow_ts_in_intent = 0;
    PyObject *outflow_ts_in_capi = Py_None;
    long_long *tsi = NULL;
    npy_intp tsi_Dims[1] = {-1};
    const int tsi_Rank = 1;
    PyArrayObject *capi_tsi_as_array = NULL;
    int capi_tsi_intent = 0;
    PyObject *tsi_capi = Py_None;
    double *ts = NULL;
    npy_intp ts_Dims[1] = {-1};
    const int ts_Rank = 1;
    PyArrayObject *capi_ts_as_array = NULL;
    int capi_ts_intent = 0;
    PyObject *ts_capi = Py_None;
    double *c0 = NULL;
    npy_intp c0_Dims[1] = {-1};
    const int c0_Rank = 1;
    PyArrayObject *capi_c0_as_array = NULL;
    int capi_c0_intent = 0;
    PyObject *c0_capi = Py_None;
    double *c1 = NULL;
    npy_intp c1_Dims[1] = {-1};
    const int c1_Rank = 1;
    PyArrayObject *capi_c1_as_array = NULL;
    int capi_c1_intent = 0;
    PyObject *c1_capi = Py_None;
    double *c2 = NULL;
    npy_intp c2_Dims[1] = {-1};
    const int c2_Rank = 1;
    PyArrayObject *capi_c2_as_array = NULL;
    int capi_c2_intent = 0;
    PyObject *c2_capi = Py_None;
    double *seg_upstream_inflow = NULL;
    npy_intp seg_upstream_inflow_Dims[1] = {-1};
    const int seg_upstream_inflow_Rank = 1;
    PyArrayObject *capi_seg_upstream_inflow_as_array = NULL;
    int capi_seg_upstream_inflow_intent = 0;
    double *seg_inflow0 = NULL;
    npy_intp seg_inflow0_Dims[1] = {-1};
    const int seg_inflow0_Rank = 1;
    PyArrayObject *capi_seg_inflow0_as_array = NULL;
    int capi_seg_inflow0_intent = 0;
    double *seg_inflow = NULL;
    npy_intp seg_inflow_Dims[1] = {-1};
    const int seg_inflow_Rank = 1;
    PyArrayObject *capi_seg_inflow_as_array = NULL;
    int capi_seg_inflow_intent = 0;
    double *seg_outflow = NULL;
    npy_intp seg_outflow_Dims[1] = {-1};
    const int seg_outflow_Rank = 1;
    PyArrayObject *capi_seg_outflow_as_array = NULL;
    int capi_seg_outflow_intent = 0;
    double *inflow_ts = NULL;
    npy_intp inflow_ts_Dims[1] = {-1};
    const int inflow_ts_Rank = 1;
    PyArrayObject *capi_inflow_ts_as_array = NULL;
    int capi_inflow_ts_intent = 0;
    double *outflow_ts = NULL;
    npy_intp outflow_ts_Dims[1] = {-1};
    const int outflow_ts_Rank = 1;
    PyArrayObject *capi_outflow_ts_as_array = NULL;
    int capi_outflow_ts_intent = 0;
    double *seg_current_sum = NULL;
    npy_intp seg_current_sum_Dims[1] = {-1};
    const int seg_current_sum_Rank = 1;
    PyArrayObject *capi_seg_current_sum_as_array = NULL;
    int capi_seg_current_sum_intent = 0;
    static char *capi_kwlist[] = {"segment_order","to_segment","seg_lateral_inflow","seg_inflow0_in","outflow_ts_in","tsi","ts","c0","c1","c2","nseg",NULL};

/*routdebugenter*/
#ifdef F2PY_REPORT_ATEXIT
f2py_start_clock();
#endif
    if (!PyArg_ParseTupleAndKeywords(capi_args,capi_keywds,\
        "OOOOOOOOOO|O:prms_channel_f.calc_muskingum_mann",\
        capi_kwlist,&segment_order_capi,&to_segment_capi,&seg_lateral_inflow_capi,&seg_inflow0_in_capi,&outflow_ts_in_capi,&tsi_capi,&ts_capi,&c0_capi,&c1_capi,&c2_capi,&nseg_capi))
        return NULL;
/*frompyobj*/
    /* Processing variable segment_order */
    ;
    capi_segment_order_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 1st argument `segment_order`";
    capi_segment_order_as_array = ndarray_from_pyobj(  NPY_LONGLONG,1,segment_order_Dims,segment_order_Rank,  capi_segment_order_intent,segment_order_capi,capi_errmess);
    if (capi_segment_order_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        segment_order = (long_long *)(PyArray_DATA(capi_segment_order_as_array));

    /* Processing variable nseg */
    if (nseg_capi == Py_None) nseg = shape(segment_order, 0); else
        f2py_success = int_from_pyobj(&nseg,nseg_capi,"prms_channel_f.calc_muskingum_mann() 1st keyword (nseg) can't be converted to int");
    if (f2py_success) {
    CHECKSCALAR(shape(segment_order, 0) == nseg,"shape(segment_order, 0) == nseg","1st keyword nseg","calc_muskingum_mann:nseg=%d",nseg) {
    /* Processing variable to_segment */
    to_segment_Dims[0]=nseg;
    capi_to_segment_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 2nd argument `to_segment`";
    capi_to_segment_as_array = ndarray_from_pyobj(  NPY_LONGLONG,1,to_segment_Dims,to_segment_Rank,  capi_to_segment_intent,to_segment_capi,capi_errmess);
    if (capi_to_segment_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        to_segment = (long_long *)(PyArray_DATA(capi_to_segment_as_array));

    /* Processing variable seg_lateral_inflow */
    seg_lateral_inflow_Dims[0]=nseg;
    capi_seg_lateral_inflow_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 3rd argument `seg_lateral_inflow`";
    capi_seg_lateral_inflow_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_lateral_inflow_Dims,seg_lateral_inflow_Rank,  capi_seg_lateral_inflow_intent,seg_lateral_inflow_capi,capi_errmess);
    if (capi_seg_lateral_inflow_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_lateral_inflow = (double *)(PyArray_DATA(capi_seg_lateral_inflow_as_array));

    /* Processing variable seg_inflow0_in */
    seg_inflow0_in_Dims[0]=nseg;
    capi_seg_inflow0_in_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 4th argument `seg_inflow0_in`";
    capi_seg_inflow0_in_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_inflow0_in_Dims,seg_inflow0_in_Rank,  capi_seg_inflow0_in_intent,seg_inflow0_in_capi,capi_errmess);
    if (capi_seg_inflow0_in_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_inflow0_in = (double *)(PyArray_DATA(capi_seg_inflow0_in_as_array));

    /* Processing variable outflow_ts_in */
    outflow_ts_in_Dims[0]=nseg;
    capi_outflow_ts_in_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 5th argument `outflow_ts_in`";
    capi_outflow_ts_in_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,outflow_ts_in_Dims,outflow_ts_in_Rank,  capi_outflow_ts_in_intent,outflow_ts_in_capi,capi_errmess);
    if (capi_outflow_ts_in_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        outflow_ts_in = (double *)(PyArray_DATA(capi_outflow_ts_in_as_array));

    /* Processing variable tsi */
    tsi_Dims[0]=nseg;
    capi_tsi_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 6th argument `tsi`";
    capi_tsi_as_array = ndarray_from_pyobj(  NPY_LONGLONG,1,tsi_Dims,tsi_Rank,  capi_tsi_intent,tsi_capi,capi_errmess);
    if (capi_tsi_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        tsi = (long_long *)(PyArray_DATA(capi_tsi_as_array));

    /* Processing variable ts */
    ts_Dims[0]=nseg;
    capi_ts_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 7th argument `ts`";
    capi_ts_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,ts_Dims,ts_Rank,  capi_ts_intent,ts_capi,capi_errmess);
    if (capi_ts_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        ts = (double *)(PyArray_DATA(capi_ts_as_array));

    /* Processing variable c0 */
    c0_Dims[0]=nseg;
    capi_c0_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 8th argument `c0`";
    capi_c0_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,c0_Dims,c0_Rank,  capi_c0_intent,c0_capi,capi_errmess);
    if (capi_c0_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        c0 = (double *)(PyArray_DATA(capi_c0_as_array));

    /* Processing variable c1 */
    c1_Dims[0]=nseg;
    capi_c1_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 9th argument `c1`";
    capi_c1_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,c1_Dims,c1_Rank,  capi_c1_intent,c1_capi,capi_errmess);
    if (capi_c1_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        c1 = (double *)(PyArray_DATA(capi_c1_as_array));

    /* Processing variable c2 */
    c2_Dims[0]=nseg;
    capi_c2_intent |= F2PY_INTENT_IN;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the 10th argument `c2`";
    capi_c2_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,c2_Dims,c2_Rank,  capi_c2_intent,c2_capi,capi_errmess);
    if (capi_c2_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        c2 = (double *)(PyArray_DATA(capi_c2_as_array));

    /* Processing variable seg_upstream_inflow */
    seg_upstream_inflow_Dims[0]=nseg;
    capi_seg_upstream_inflow_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `seg_upstream_inflow`";
    capi_seg_upstream_inflow_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_upstream_inflow_Dims,seg_upstream_inflow_Rank,  capi_seg_upstream_inflow_intent,Py_None,capi_errmess);
    if (capi_seg_upstream_inflow_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_upstream_inflow = (double *)(PyArray_DATA(capi_seg_upstream_inflow_as_array));

    /* Processing variable seg_inflow0 */
    seg_inflow0_Dims[0]=nseg;
    capi_seg_inflow0_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `seg_inflow0`";
    capi_seg_inflow0_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_inflow0_Dims,seg_inflow0_Rank,  capi_seg_inflow0_intent,Py_None,capi_errmess);
    if (capi_seg_inflow0_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_inflow0 = (double *)(PyArray_DATA(capi_seg_inflow0_as_array));

    /* Processing variable seg_inflow */
    seg_inflow_Dims[0]=nseg;
    capi_seg_inflow_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `seg_inflow`";
    capi_seg_inflow_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_inflow_Dims,seg_inflow_Rank,  capi_seg_inflow_intent,Py_None,capi_errmess);
    if (capi_seg_inflow_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_inflow = (double *)(PyArray_DATA(capi_seg_inflow_as_array));

    /* Processing variable seg_outflow */
    seg_outflow_Dims[0]=nseg;
    capi_seg_outflow_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `seg_outflow`";
    capi_seg_outflow_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_outflow_Dims,seg_outflow_Rank,  capi_seg_outflow_intent,Py_None,capi_errmess);
    if (capi_seg_outflow_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_outflow = (double *)(PyArray_DATA(capi_seg_outflow_as_array));

    /* Processing variable inflow_ts */
    inflow_ts_Dims[0]=nseg;
    capi_inflow_ts_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `inflow_ts`";
    capi_inflow_ts_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,inflow_ts_Dims,inflow_ts_Rank,  capi_inflow_ts_intent,Py_None,capi_errmess);
    if (capi_inflow_ts_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        inflow_ts = (double *)(PyArray_DATA(capi_inflow_ts_as_array));

    /* Processing variable outflow_ts */
    outflow_ts_Dims[0]=nseg;
    capi_outflow_ts_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `outflow_ts`";
    capi_outflow_ts_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,outflow_ts_Dims,outflow_ts_Rank,  capi_outflow_ts_intent,Py_None,capi_errmess);
    if (capi_outflow_ts_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        outflow_ts = (double *)(PyArray_DATA(capi_outflow_ts_as_array));

    /* Processing variable seg_current_sum */
    seg_current_sum_Dims[0]=nseg;
    capi_seg_current_sum_intent |= F2PY_INTENT_OUT|F2PY_INTENT_HIDE;
    const char * capi_errmess = "prms_channel_f.prms_channel_f.calc_muskingum_mann: failed to create array from the hidden `seg_current_sum`";
    capi_seg_current_sum_as_array = ndarray_from_pyobj(  NPY_DOUBLE,1,seg_current_sum_Dims,seg_current_sum_Rank,  capi_seg_current_sum_intent,Py_None,capi_errmess);
    if (capi_seg_current_sum_as_array == NULL) {
        PyObject* capi_err = PyErr_Occurred();
        if (capi_err == NULL) {
            capi_err = prms_channel_f_error;
            PyErr_SetString(capi_err, capi_errmess);
        }
    } else {
        seg_current_sum = (double *)(PyArray_DATA(capi_seg_current_sum_as_array));

/*end of frompyobj*/
#ifdef F2PY_REPORT_ATEXIT
f2py_start_call_clock();
#endif
/*callfortranroutine*/
                (*f2py_func)(&nseg,segment_order,to_segment,seg_lateral_inflow,seg_inflow0_in,outflow_ts_in,tsi,ts,c0,c1,c2,seg_upstream_inflow,seg_inflow0,seg_inflow,seg_outflow,inflow_ts,outflow_ts,seg_current_sum);
if (PyErr_Occurred())
  f2py_success = 0;
#ifdef F2PY_REPORT_ATEXIT
f2py_stop_call_clock();
#endif
/*end of callfortranroutine*/
        if (f2py_success) {
/*pyobjfrom*/
/*end of pyobjfrom*/
        CFUNCSMESS("Building return value.\n");
        capi_buildvalue = Py_BuildValue("NNNNNNN",capi_seg_upstream_inflow_as_array,capi_seg_inflow0_as_array,capi_seg_inflow_as_array,capi_seg_outflow_as_array,capi_inflow_ts_as_array,capi_outflow_ts_as_array,capi_seg_current_sum_as_array);
/*closepyobjfrom*/
/*end of closepyobjfrom*/
        } /*if (f2py_success) after callfortranroutine*/
/*cleanupfrompyobj*/
    }  /* if (capi_seg_current_sum_as_array == NULL) ... else of seg_current_sum */
    /* End of cleaning variable seg_current_sum */
    }  /* if (capi_outflow_ts_as_array == NULL) ... else of outflow_ts */
    /* End of cleaning variable outflow_ts */
    }  /* if (capi_inflow_ts_as_array == NULL) ... else of inflow_ts */
    /* End of cleaning variable inflow_ts */
    }  /* if (capi_seg_outflow_as_array == NULL) ... else of seg_outflow */
    /* End of cleaning variable seg_outflow */
    }  /* if (capi_seg_inflow_as_array == NULL) ... else of seg_inflow */
    /* End of cleaning variable seg_inflow */
    }  /* if (capi_seg_inflow0_as_array == NULL) ... else of seg_inflow0 */
    /* End of cleaning variable seg_inflow0 */
    }  /* if (capi_seg_upstream_inflow_as_array == NULL) ... else of seg_upstream_inflow */
    /* End of cleaning variable seg_upstream_inflow */
    if((PyObject *)capi_c2_as_array!=c2_capi) {
        Py_XDECREF(capi_c2_as_array); }
    }  /* if (capi_c2_as_array == NULL) ... else of c2 */
    /* End of cleaning variable c2 */
    if((PyObject *)capi_c1_as_array!=c1_capi) {
        Py_XDECREF(capi_c1_as_array); }
    }  /* if (capi_c1_as_array == NULL) ... else of c1 */
    /* End of cleaning variable c1 */
    if((PyObject *)capi_c0_as_array!=c0_capi) {
        Py_XDECREF(capi_c0_as_array); }
    }  /* if (capi_c0_as_array == NULL) ... else of c0 */
    /* End of cleaning variable c0 */
    if((PyObject *)capi_ts_as_array!=ts_capi) {
        Py_XDECREF(capi_ts_as_array); }
    }  /* if (capi_ts_as_array == NULL) ... else of ts */
    /* End of cleaning variable ts */
    if((PyObject *)capi_tsi_as_array!=tsi_capi) {
        Py_XDECREF(capi_tsi_as_array); }
    }  /* if (capi_tsi_as_array == NULL) ... else of tsi */
    /* End of cleaning variable tsi */
    if((PyObject *)capi_outflow_ts_in_as_array!=outflow_ts_in_capi) {
        Py_XDECREF(capi_outflow_ts_in_as_array); }
    }  /* if (capi_outflow_ts_in_as_array == NULL) ... else of outflow_ts_in */
    /* End of cleaning variable outflow_ts_in */
    if((PyObject *)capi_seg_inflow0_in_as_array!=seg_inflow0_in_capi) {
        Py_XDECREF(capi_seg_inflow0_in_as_array); }
    }  /* if (capi_seg_inflow0_in_as_array == NULL) ... else of seg_inflow0_in */
    /* End of cleaning variable seg_inflow0_in */
    if((PyObject *)capi_seg_lateral_inflow_as_array!=seg_lateral_inflow_capi) {
        Py_XDECREF(capi_seg_lateral_inflow_as_array); }
    }  /* if (capi_seg_lateral_inflow_as_array == NULL) ... else of seg_lateral_inflow */
    /* End of cleaning variable seg_lateral_inflow */
    if((PyObject *)capi_to_segment_as_array!=to_segment_capi) {
        Py_XDECREF(capi_to_segment_as_array); }
    }  /* if (capi_to_segment_as_array == NULL) ... else of to_segment */
    /* End of cleaning variable to_segment */
    } /*CHECKSCALAR(shape(segment_order, 0) == nseg)*/
    } /*if (f2py_success) of nseg*/
    /* End of cleaning variable nseg */
    if((PyObject *)capi_segment_order_as_array!=segment_order_capi) {
        Py_XDECREF(capi_segment_order_as_array); }
    }  /* if (capi_segment_order_as_array == NULL) ... else of segment_order */
    /* End of cleaning variable segment_order */
/*end of cleanupfrompyobj*/
    if (capi_buildvalue == NULL) {
/*routdebugfailure*/
    } else {
/*routdebugleave*/
    }
    CFUNCSMESS("Freeing memory.\n");
/*freemem*/
#ifdef F2PY_REPORT_ATEXIT
f2py_stop_clock();
#endif
    return capi_buildvalue;
}
/************************* end of calc_muskingum_mann *************************/
/*eof body*/

/******************* See f2py2e/f90mod_rules.py: buildhooks *******************/
/*need_f90modhooks*/

/************** See f2py2e/rules.py: module_rules['modulebody'] **************/

/******************* See f2py2e/common_rules.py: buildhooks *******************/

/*need_commonhooks*/

/**************************** See f2py2e/rules.py ****************************/

static FortranDataDef f2py_routine_defs[] = {
    {"calc_muskingum_mann",-1,{{-1}},0,0,(char *)  F_FUNC_US(calc_muskingum_mann,CALC_MUSKINGUM_MANN),  (f2py_init_func)f2py_rout_prms_channel_f_calc_muskingum_mann,doc_f2py_rout_prms_channel_f_calc_muskingum_mann},

/*eof routine_defs*/
    {NULL}
};

static PyMethodDef f2py_module_methods[] = {

    {NULL,NULL}
};

static struct PyModuleDef moduledef = {
    PyModuleDef_HEAD_INIT,
    "prms_channel_f",
    NULL,
    -1,
    f2py_module_methods,
    NULL,
    NULL,
    NULL,
    NULL
};

PyMODINIT_FUNC PyInit_prms_channel_f(void) {
    int i;
    PyObject *m,*d, *s, *tmp;
    m = prms_channel_f_module = PyModule_Create(&moduledef);
    Py_SET_TYPE(&PyFortran_Type, &PyType_Type);
    import_array();
    if (PyErr_Occurred())
        {PyErr_SetString(PyExc_ImportError, "can't initialize module prms_channel_f (failed to import numpy)"); return m;}
    d = PyModule_GetDict(m);
    s = PyUnicode_FromString("1.25.1");
    PyDict_SetItemString(d, "__version__", s);
    Py_DECREF(s);
    s = PyUnicode_FromString(
        "This module 'prms_channel_f' is auto-generated with f2py (version:1.25.1).\nFunctions:\n"
"    seg_upstream_inflow,seg_inflow0,seg_inflow,seg_outflow,inflow_ts,outflow_ts,seg_current_sum = calc_muskingum_mann(segment_order,to_segment,seg_lateral_inflow,seg_inflow0_in,outflow_ts_in,tsi,ts,c0,c1,c2,nseg=shape(segment_order, 0))\n"
".");
    PyDict_SetItemString(d, "__doc__", s);
    Py_DECREF(s);
    s = PyUnicode_FromString("1.25.1");
    PyDict_SetItemString(d, "__f2py_numpy_version__", s);
    Py_DECREF(s);
    prms_channel_f_error = PyErr_NewException ("prms_channel_f.error", NULL, NULL);
    /*
     * Store the error object inside the dict, so that it could get deallocated.
     * (in practice, this is a module, so it likely will not and cannot.)
     */
    PyDict_SetItemString(d, "_prms_channel_f_error", prms_channel_f_error);
    Py_DECREF(prms_channel_f_error);
    for(i=0;f2py_routine_defs[i].name!=NULL;i++) {
        tmp = PyFortranObject_NewAsAttr(&f2py_routine_defs[i]);
        PyDict_SetItemString(d, f2py_routine_defs[i].name, tmp);
        Py_DECREF(tmp);
    }

/*eof initf2pywraphooks*/
/*eof initf90modhooks*/

/*eof initcommonhooks*/


#ifdef F2PY_REPORT_ATEXIT
    if (! PyErr_Occurred())
        on_exit(f2py_report_on_exit,(void*)"prms_channel_f");
#endif
    return m;
}
#ifdef __cplusplus
}
#endif
